(function(n){var u=function(){var tt='<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"><\/div><\/div><\/div><\/div><\/div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"><\/div><div class="colpick_hue_rarr"><\/div><\/div><\/div><div class="colpick_new_color"><\/div><div class="colpick_current_color"><\/div><div class="colpick_hex_field"><div class="colpick_field_letter">#<\/div><input type="text" maxlength="6" size="6" /><\/div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R<\/div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"><\/div><div class="colpick_field_darr"><\/div><\/div><\/div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G<\/div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"><\/div><div class="colpick_field_darr"><\/div><\/div><\/div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B<\/div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"><\/div><div class="colpick_field_darr"><\/div><\/div><\/div><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H<\/div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"><\/div><div class="colpick_field_darr"><\/div><\/div><\/div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S<\/div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"><\/div><div class="colpick_field_darr"><\/div><\/div><\/div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B<\/div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"><\/div><div class="colpick_field_darr"><\/div><\/div><\/div><div class="colpick_submit"><\/div><\/div>',it={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156},u=function(t,r){var u=i(t);n(r).data("colpick").fields.eq(1).val(u.r).end().eq(2).val(u.g).end().eq(3).val(u.b).end()},s=function(t,i){n(i).data("colpick").fields.eq(4).val(Math.round(t.h)).end().eq(5).val(Math.round(t.s)).end().eq(6).val(Math.round(t.b)).end()},e=function(i,r){n(r).data("colpick").fields.eq(0).val(t(i))},h=function(i,r){n(r).data("colpick").selector.css("backgroundColor","#"+t({h:i.h,s:100,b:100}));n(r).data("colpick").selectorIndic.css({left:parseInt(n(r).data("colpick").height*i.s/100,10),top:parseInt(n(r).data("colpick").height*(100-i.b)/100,10)})},c=function(t,i){n(i).data("colpick").hue.css("top",parseInt(n(i).data("colpick").height-n(i).data("colpick").height*t.h/360,10))},a=function(i,r){n(r).data("colpick").currentColor.css("backgroundColor","#"+t(i))},l=function(i,r){n(r).data("colpick").newColor.css("backgroundColor","#"+t(i))},o=function(){var o=n(this).parent().parent(),a;this.parentNode.className.indexOf("_hex")>0?(o.data("colpick").color=a=f(lt(this.value)),u(a,o.get(0)),s(a,o.get(0))):this.parentNode.className.indexOf("_hsb")>0?(o.data("colpick").color=a=v({h:parseInt(o.data("colpick").fields.eq(4).val(),10),s:parseInt(o.data("colpick").fields.eq(5).val(),10),b:parseInt(o.data("colpick").fields.eq(6).val(),10)}),u(a,o.get(0)),e(a,o.get(0))):(o.data("colpick").color=a=r(ct({r:parseInt(o.data("colpick").fields.eq(1).val(),10),g:parseInt(o.data("colpick").fields.eq(2).val(),10),b:parseInt(o.data("colpick").fields.eq(3).val(),10)})),e(a,o.get(0)),s(a,o.get(0)));h(a,o.get(0));c(a,o.get(0));l(a,o.get(0));o.data("colpick").onChange.apply(o.parent(),[a,t(a),i(a),o.data("colpick").el,0])},rt=function(){n(this).parent().removeClass("colpick_focus")},ut=function(){n(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus");n(this).parent().addClass("colpick_focus")},ft=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var i=n(this).parent().find("input").focus(),r={el:n(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:t.pageY,field:i,val:parseInt(i.val(),10),preview:n(this).parent().parent().data("colpick").livePreview};n(document).mouseup(r,p);n(document).mousemove(r,y)},y=function(n){return n.data.field.val(Math.max(0,Math.min(n.data.max,parseInt(n.data.val-n.pageY+n.data.y,10)))),n.data.preview&&o.apply(n.data.field.get(0),[!0]),!1},p=function(t){return o.apply(t.data.field.get(0),[!0]),t.data.el.removeClass("colpick_slider").find("input").focus(),n(document).off("mouseup",p),n(document).off("mousemove",y),!1},et=function(t){var i,r;t.preventDefault?t.preventDefault():t.returnValue=!1;i={cal:n(this).parent(),y:n(this).offset().top};n(document).on("mouseup touchend",i,b);n(document).on("mousemove touchmove",i,w);return r=t.type=="touchstart"?t.originalEvent.changedTouches[0].pageY:t.pageY,o.apply(i.cal.data("colpick").fields.eq(4).val(parseInt(360*(i.cal.data("colpick").height-(r-i.y))/i.cal.data("colpick").height,10)).get(0),[i.cal.data("colpick").livePreview]),!1},w=function(n){var t=n.type=="touchmove"?n.originalEvent.changedTouches[0].pageY:n.pageY;return o.apply(n.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(n.data.cal.data("colpick").height-Math.max(0,Math.min(n.data.cal.data("colpick").height,t-n.data.y)))/n.data.cal.data("colpick").height,10)).get(0),[n.data.preview]),!1},b=function(t){return u(t.data.cal.data("colpick").color,t.data.cal.get(0)),e(t.data.cal.data("colpick").color,t.data.cal.get(0)),n(document).off("mouseup touchend",b),n(document).off("mousemove touchmove",w),!1},ot=function(t){var i,r;t.preventDefault?t.preventDefault():t.returnValue=!1;i={cal:n(this).parent(),pos:n(this).offset()};i.preview=i.cal.data("colpick").livePreview;n(document).on("mouseup touchend",i,d);n(document).on("mousemove touchmove",i,k);return t.type=="touchstart"?(pageX=t.originalEvent.changedTouches[0].pageX,r=t.originalEvent.changedTouches[0].pageY):(pageX=t.pageX,r=t.pageY),o.apply(i.cal.data("colpick").fields.eq(6).val(parseInt(100*(i.cal.data("colpick").height-(r-i.pos.top))/i.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(pageX-i.pos.left)/i.cal.data("colpick").height,10)).get(0),[i.preview]),!1},k=function(n){var t;return n.type=="touchmove"?(pageX=n.originalEvent.changedTouches[0].pageX,t=n.originalEvent.changedTouches[0].pageY):(pageX=n.pageX,t=n.pageY),o.apply(n.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(n.data.cal.data("colpick").height-Math.max(0,Math.min(n.data.cal.data("colpick").height,t-n.data.pos.top)))/n.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(n.data.cal.data("colpick").height,pageX-n.data.pos.left))/n.data.cal.data("colpick").height,10)).get(0),[n.data.preview]),!1},d=function(t){return u(t.data.cal.data("colpick").color,t.data.cal.get(0)),e(t.data.cal.data("colpick").color,t.data.cal.get(0)),n(document).off("mouseup touchend",d),n(document).off("mousemove touchmove",k),!1},st=function(){var r=n(this).parent(),u=r.data("colpick").color;r.data("colpick").origColor=u;a(u,r.get(0));r.data("colpick").onSubmit(u,t(u),i(u),r.data("colpick").el)},g=function(t){var i;t.stopPropagation();i=n("#"+n(this).data("colpickId"));i.data("colpick").onBeforeShow.apply(this,[i.get(0)]);var u=n(this).offset(),o=u.top+this.offsetHeight,r=u.left,f=ht(),e=i.width();r+e>f.l+f.w&&(r-=e);i.css({left:r+"px",top:o+"px"});i.data("colpick").onShow.apply(this,[i.get(0)])!=!1&&i.show();n("html").mousedown({cal:i},nt);i.mousedown(function(n){n.stopPropagation()})},nt=function(t){t.data.cal.data("colpick").onHide.apply(this,[t.data.cal.get(0)])!=!1&&t.data.cal.hide();n("html").off("mousedown",nt)},ht=function(){var n=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(n?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(n?document.documentElement.clientWidth:document.body.clientWidth)}},v=function(n){return{h:Math.min(360,Math.max(0,n.h)),s:Math.min(100,Math.max(0,n.s)),b:Math.min(100,Math.max(0,n.b))}},ct=function(n){return{r:Math.min(255,Math.max(0,n.r)),g:Math.min(255,Math.max(0,n.g)),b:Math.min(255,Math.max(0,n.b))}},lt=function(n){var r=6-n.length,t,i;if(r>0){for(t=[],i=0;i<r;i++)t.push("0");t.push(n);n=t.join("")}return n},at=function(){var t=n(this).parent(),i=t.data("colpick").origColor;t.data("colpick").color=i;u(i,t.get(0));e(i,t.get(0));s(i,t.get(0));h(i,t.get(0));c(i,t.get(0));l(i,t.get(0))};return{init:function(t){if(t=n.extend({},it,t||{}),typeof t.color=="string")t.color=f(t.color);else if(t.color.r!=undefined&&t.color.g!=undefined&&t.color.b!=undefined)t.color=r(t.color);else if(t.color.h!=undefined&&t.color.s!=undefined&&t.color.b!=undefined)t.color=v(t.color);else return this;return this.each(function(){var i,y,r,f,w;if(!n(this).data("colpickId")){i=n.extend({},t);i.origColor=t.color;y="collorpicker_"+parseInt(Math.random()*1e3);n(this).data("colpickId",y);r=n(tt).attr("id",y);r.addClass("colpick_"+i.layout+(i.submit?"":" colpick_"+i.layout+"_ns"));i.colorScheme!="light"&&r.addClass("colpick_"+i.colorScheme);r.find("div.colpick_submit").html(i.submitText).click(st);i.fields=r.find("input").change(o).blur(rt).focus(ut);r.find("div.colpick_field_arrs").mousedown(ft).end().find("div.colpick_current_color").click(at);i.selector=r.find("div.colpick_color").on("mousedown touchstart",ot);i.selectorIndic=i.selector.find("div.colpick_selector_outer");i.el=this;i.hue=r.find("div.colpick_hue_arrs");huebar=i.hue.parent();var b=navigator.userAgent.toLowerCase(),p=navigator.appName==="Microsoft Internet Explorer",k=p?parseFloat(b.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,d=p&&k<10,v=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(d)for(f=0;f<=11;f++)w=n("<div><\/div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+v[f]+", endColorstr="+v[f+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+v[f]+", endColorstr="+v[f+1]+')";'),huebar.append(w);else stopList=v.join(","),huebar.attr("style","background:-webkit-linear-gradient(top,"+stopList+"); background: -o-linear-gradient(top,"+stopList+"); background: -ms-linear-gradient(top,"+stopList+"); background:-moz-linear-gradient(top,"+stopList+"); -webkit-linear-gradient(top,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");r.find("div.colpick_hue").on("mousedown touchstart",et);if(i.newColor=r.find("div.colpick_new_color"),i.currentColor=r.find("div.colpick_current_color"),r.data("colpick",i),u(i.color,r.get(0)),s(i.color,r.get(0)),e(i.color,r.get(0)),c(i.color,r.get(0)),h(i.color,r.get(0)),a(i.color,r.get(0)),l(i.color,r.get(0)),i.flat)r.appendTo(this).show(),r.css({position:"relative",display:"block"});else{r.appendTo(document.body);n(this).on(i.showEvent,g);r.css({position:"absolute","z-index":"100"})}}})},showPicker:function(){return this.each(function(){n(this).data("colpickId")&&g.apply(this)})},hidePicker:function(){return this.each(function(){n(this).data("colpickId")&&n("#"+n(this).data("colpickId")).hide()})},setColor:function(o,y){if(y=typeof y=="undefined"?1:y,typeof o=="string")o=f(o);else if(o.r!=undefined&&o.g!=undefined&&o.b!=undefined)o=r(o);else if(o.h!=undefined&&o.s!=undefined&&o.b!=undefined)o=v(o);else return this;return this.each(function(){if(n(this).data("colpickId")){var r=n("#"+n(this).data("colpickId"));r.data("colpick").color=o;r.data("colpick").origColor=o;u(o,r.get(0));s(o,r.get(0));e(o,r.get(0));c(o,r.get(0));h(o,r.get(0));l(o,r.get(0));r.data("colpick").onChange.apply(r.parent(),[o,t(o),i(o),r.data("colpick").el,1]);y&&a(o,r.get(0))}})}}}(),e=function(n){var n=parseInt(n.indexOf("#")>-1?n.substring(1):n,16);return{r:n>>16,g:(n&65280)>>8,b:n&255}},f=function(n){return r(e(n))},r=function(n){var t={h:0,s:0,b:0},u=Math.min(n.r,n.g,n.b),i=Math.max(n.r,n.g,n.b),r=i-u;return t.b=i,t.s=i!=0?255*r/i:0,t.h=t.s!=0?n.r==i?(n.g-n.b)/r:n.g==i?2+(n.b-n.r)/r:4+(n.r-n.g)/r:-1,t.h*=60,t.h<0&&(t.h+=360),t.s*=100/255,t.b*=100/255,t},i=function(n){var t={},u=n.h,o=n.s*255/100,e=n.b*255/100;if(o==0)t.r=t.g=t.b=e;else{var i=e,r=(255-o)*e/255,f=(i-r)*(u%60)/60;u==360&&(u=0);u<60?(t.r=i,t.b=r,t.g=r+f):u<120?(t.g=i,t.b=r,t.r=i-f):u<180?(t.g=i,t.r=r,t.b=r+f):u<240?(t.b=i,t.r=r,t.g=i-f):u<300?(t.b=i,t.g=r,t.r=r+f):u<360?(t.r=i,t.g=r,t.b=i-f):(t.r=0,t.g=0,t.b=0)}return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}},o=function(t){var i=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return n.each(i,function(n,t){t.length==1&&(i[n]="0"+t)}),i.join("")},t=function(n){return o(i(n))};n.fn.extend({colpick:u.init,colpickHide:u.hidePicker,colpickShow:u.showPicker,colpickSetColor:u.setColor});n.extend({colpick:{rgbToHex:o,rgbToHsb:r,hsbToHex:t,hsbToRgb:i,hexToHsb:f,hexToRgb:e}})})(jQuery);
//# sourceMappingURL=colpick.min.js.map
