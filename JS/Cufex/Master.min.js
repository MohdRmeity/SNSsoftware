function SetDefaults(){$(".HiddenMenuOpen").val()==0?(CloseMenu(!1),$(".DivMain").css({opacity:0}),setTimeout(function(){$(".DivMain").css({opacity:1})},500)):$(".DivMain").css({opacity:1});SNSFunctions();SetMenuFunctionality();SetScrolling();$(document).unbind("click").on("click",function(n){$(".ActionHiddenButtons").slideUp();$(".ProfileData").slideUp();!$(n.target).closest(".chosen-container").length>0&&$(".NewHeaderRecord").addClass("u-overflowHidden");!$(n.target).closest(".widthMenu").length>0&&!$(".MenuPin").hasClass("Pinned")&&!MenuClosed&&CloseMenu(!0)});$(window).resize(function(){setOnCufex_Resize()}).scroll(function(){}).keydown(function(n){var t=n.keyCode||n.which;t==9&&$(n.target).is(".InsideMenuDiv *")&&n.preventDefault()});$().KeyPressfunctionsOverride();setOnCufex_Resize()}function SNSFunctions(){function i(n){var t;if(n.files&&n.files[0]){var i=n.files[0],r=i.type;if($.inArray(r,["image/gif","image/jpeg","image/png"])<0){swal({title:"Logo Upload",text:"Please upload a valid image file",type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});$(".PortalLogo").attr("src",sAppPath+"images/Cufex_Images/logo.png");$(n).val("");return}t=new FileReader;t.onload=function(n){$(".PortalLogo").attr("src",n.target.result)};t.readAsDataURL(i)}}var n,t;if(NumberOfRecordsInPage=$("#NumberOfRecordsInPage").val(),NumberOfRecordsInPageDetails=NumberOfRecordsInPage,$("#SortBy").length>0&&(SortBy=$("#SortBy").val(),SortByDetails=SortBy),SetGridActions(),SetDropZone(),SetUITemplate(),SetCarrierEvents(),$(".btnQuickEntry").click(function(){$(".AddDetailsBtn").hide();$(".ErrorIcon").remove();$(".MyRecordID").val(0);$(".FloatRecordField, .Details_FloatRecordField").find("input:text,select").each(function(){var n=$(this);n.attr("data-value")!=null?n.val(n.attr("data-value")):n.val("");n.attr("data-disabled")!=null?n.prop("disabled",!0):n.prop("disabled",!1)});$(".FloatRecordField").find("input:password").val("");$(".FloatRecordField").find("input:password").removeClass("Error");$(".FloatRecordField").find("input:checkbox").prop("false");$(".FloatRecordField").find("select").prop("disabled",!1).trigger("chosen:updated");AutoPostBack("");$(".New_Modify_Record_PopUp").fadeIn(function(){setOnCufex_Resize();$(".AddDetailsBtn").show();$(".RecordsContainer_Inside").eq(0).find(".InputDetailsSku").empty().trigger("chosen:updated")})}),$(".btnAddNew").click(function(){$(".MyRecordID").val(0);$(".MyDetailRecordID").val(0);NumberOfRecordsInPageDetails=$("#NumberOfRecordsInPage").val();$("#SortBy").length>0&&(SortByDetails=$("#SortBy").val());CurrentPageDetails=0;MaxPagesDetails=1;SearchQueryDetails="";$(".DetailsGridView").find(".SortUp,.SortDown").removeClass("Active");$(".HeaderGridView,.DetailsGridView,.btnQuickEntry,.ActionsDetails").hide();$(this).hide();$(this).parent("td").prev("td").hide();$(".NewRecord").fadeIn();$(".btnSave,.BackHeader,.NewDetailRecord").show();$(this).parent("td").next("td").show();$(".MainPageDesc").html("Header");$(".btnNew,.btnDeleteDetail").show();$(".BackDetail,.btnExport,.btnImport,.btnRefresh,.VerticalSep").hide();$(".MainPageDetailTitle").html($(".MainPageDetailTitle").data("text"));$(window).width()>550&&($(".btnDelete").parent("td").css("padding-right","0px"),$(".ActionHiddenButtons").css("right","0"));$(".NewDetailRecord").find(".InputDetailsSku,.InputDetailsPackKey,.InputDetailsUOM").empty().trigger("chosen:updated");$(".MainPageTitle").attr("data-id")=="Warehouse_PO"||$(".MainPageTitle").attr("data-id")=="Warehouse_ASN"||$(".MainPageTitle").attr("data-id")=="Warehouse_SO"||$(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement"?$(".NewHeaderRecord").find(".InputStorerKey,.InputPOType,.InputSellerName,.InputCarrierKey,.InputOrderType,.InputReceiptType,.InputConsigneeKey,.InputType").empty().trigger("chosen:updated"):$(".MainPageTitle").attr("data-id")=="SKUCATALOGUE"&&$(".NewHeaderRecord").find(".InputSku").empty().trigger("chosen:updated");$(".NewHeaderRecord, .NewDetailRecord").find("input:text,select").each(function(){var n=$(this);n.attr("data-value")!=null?n.val(n.attr("data-value")):n.val("");n.attr("data-disabled")!=null?n.prop("disabled",!0):n.prop("disabled",!1)});$(".NewDetailRecord, .NewHeaderRecord").find("select").prop("disabled",!1).trigger("chosen:updated");$(".dropzone").length>0&&(Dropzone.forElement(".dropzone").removeAllFiles(!0),$(".dz-preview").remove(),$(".dz-default").show());setOnCufex_Resize()}),$(".BackHeader").click(function(){setOnCufex_Resize();$(".MyRecordID").val(0);$(".MyDetailRecordID").val(0);NumberOfRecordsInPageDetails=$("#NumberOfRecordsInPage").val();$("#SortBy").length>0&&(SortByDetails=$("#SortBy").val());CurrentPageDetails=0;MaxPagesDetails=1;SearchQueryDetails="";$(".DetailsGridView").find(".SortUp,.SortDown").removeClass("Active");$(".HeaderGridView").fadeIn();$(".HeaderGridView").mCustomScrollbar("scrollTo","first");$(".HeaderGridView").mCustomScrollbar("update");$(".BackHeader").hide();$(".btnAddNew").parent("td").next("td").hide();$(".NewRecord, .btnSave, .BackHeader,.CarrierEventsBtn").hide();$(".btnAddNew,.btnQuickEntry").show();$(".btnAddNew").parent("td").prev("td").show();$(".btnExport,.btnImport,.btnRefresh,.VerticalSep").show();$(".MainPageDesc").html($(".MainPageDesc").data("text"));$(window).width()<=550&&($(".btnDelete").parent("td").css("padding-right","10px"),$(".btnDelete").parent("td").css("margin-bottom","10px"),$(".btnActions").parent("td").css("padding-right","0px"));$(".dropzone").length>0&&(Dropzone.forElement(".dropzone").removeAllFiles(!0),$(".dz-preview").remove(),$(".dz-default").show());setTimeout(function(){InitColResizable()},300);$(".HiddenDetailLink").length>0&&window.history.pushState("object or string","0",$(".HiddenDetailLink").val())}),$(".btnNew").click(function(){var i,n,t;$(".MyDetailRecordID").val(0);$(".DetailsGridView,.btnDeleteDetail,.btnExportDetails,.btnRefreshDetails,.VerticalSep2").hide();$(".VerticalSep2").parent("td").prev("td").hide();$(".VerticalSep2").parent("td").next("td").hide();$(".btnRefreshDetails").parent("td").next("td").hide();$(".BackDetail").parent("td").next("td").hide();$(this).hide();$(this).parent("td").next("td").hide();$(".NewDetailRecord").fadeIn();$(".BackDetail").show();$(".MainPageDetailTitle").html("New Record");$(".NewDetailRecord").find("input:text").each(function(){var n=$(this);n.attr("data-value")!=null?n.val(n.attr("data-value")):n.val("");n.attr("data-disabled")!=null?n.prop("disabled",!0):n.prop("disabled",!1)});$(".NewDetailRecord").find("select").val("").trigger("chosen:updated");$(".NewDetailRecord").find("select").prop("disabled",!1).trigger("chosen:updated");i=$(".NewDetailRecord").find(".InputDetailsSku");n=$(".NewHeaderRecord").find(".InputFacility").val().toString();n=n.substring(n.lastIndexOf(",")+1);t=$(".NewHeaderRecord").find(".InputStorerKey").val().toString();t=t.substring(t.lastIndexOf(",")+1);GetSkuDropDown(i,n,t,"");setOnCufex_Resize()}),$(".BackDetail").click(function(){$(".MyDetailRecordID").val(0);$(".DetailsGridView").fadeIn();$(".DetailsGridView").mCustomScrollbar("scrollTo","first");$(".DetailsGridView").mCustomScrollbar("update");$(".btnNew,.btnDeleteDetail,.btnExportDetails,.btnRefreshDetails,.VerticalSep2").show();$(".VerticalSep2").parent("td").prev("td").show();$(".VerticalSep2").parent("td").next("td").show();$(".btnRefreshDetails").parent("td").next("td").show();$(".BackDetail").parent("td").next("td").show();$(".btnNew").parent("td").next("td").show();$(this).hide();$(".NewDetailRecord").hide();$(".MainPageDetailTitle").html($(".MainPageDetailTitle").data("text"));$(".DetailsGridView").find(".GridContainer").data("resizemode")=="fit"&&setOnCufex_Resize();setTimeout(function(){InitColResizable()},300);SetMasterResize()}),$(".NewHeaderRecord").resizable({handles:"s"}),$(".MainPageTitle").attr("data-id")=="Warehouse_PO"||$(".MainPageTitle").attr("data-id")=="Warehouse_ASN"||$(".MainPageTitle").attr("data-id")=="Warehouse_SO"||$(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement"){$(".NewHeaderRecord").find(".InputFacility").on("change",function(){var i=$(".NewDetailRecord").find(".InputDetailsSku"),t=$(this).val().toString(),n;t=t.substring(t.lastIndexOf(",")+1);n=$(".NewHeaderRecord").find(".InputStorerKey").val().toString();n=n.substring(n.lastIndexOf(",")+1);GetSkuDropDown(i,t,n,"")});$(".NewHeaderRecord").find(".InputStorerKey").on("change",function(){var i=$(".NewDetailRecord").find(".InputDetailsSku"),t=$(".NewHeaderRecord").find(".InputFacility").val().toString(),n;t=t.substring(t.lastIndexOf(",")+1);n=$(this).val().toString();n=n.substring(n.lastIndexOf(",")+1);GetSkuDropDown(i,t,n,"")});$(".RecordHeader").find(".InputFacility").on("change",function(){var i=$(".RecordsContainer_Inside").find(".InputDetailsSku"),t=$(this).val().toString(),n;t=t.substring(t.lastIndexOf(",")+1);n=$(".RecordHeader").find(".InputStorerKey").val().toString();n=n.substring(n.lastIndexOf(",")+1);GetSkuDropDown(i,t,n,"")});$(".RecordHeader").find(".InputStorerKey").on("change",function(){var i=$(".RecordsContainer_Inside").find(".InputDetailsSku"),t=$(".RecordHeader").find(".InputFacility").val().toString(),n;t=t.substring(t.lastIndexOf(",")+1);n=$(this).val().toString();n=n.substring(n.lastIndexOf(",")+1);GetSkuDropDown(i,t,n,"")})}$(".NewDetailRecord").find(".InputAutoPostBackDetails").on("change",function(){var n=$(this).val().toString();AutoPostBackDetails($(".NewDetailRecord"),n.substring(n.lastIndexOf(",")+1))});$(".CloseACPopup").click(function(){$(".Adjust_Columns_PopUp").fadeOut()});$(".MainPageTitle").length>0&&($(".MainPageTitle").attr("data-id")=="PROFILEDETAIL"&&LoadItems(),DisplayDropDowns());!$(".GridContainer").hasClass("GridPopup")&&$(".HiddenID").val()==0&&$(".HiddenID").length>0&&GetUserConfiguration();$(".InputAutoPostBack").on("change",function(){var n=$(this).val().toString();AutoPostBack(n.substring(n.lastIndexOf(",")+1))});if($(".MainPageTitle").attr("data-id")=="Warehouse_PO")$(".InputFacility, .InputStorerKey").on("change",function(){$(".InputDetailsSku").empty().trigger("chosen:updated")});else if($(".MainPageTitle").attr("data-id")=="Warehouse_ASN"||$(".MainPageTitle").attr("data-id")=="Warehouse_SO"||$(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement"){$(".InputFacility").on("change",function(){$(".InputDetailsUOM").empty().trigger("chosen:updated");$(".InputDetailsPrice").val("");$(".InputDetailsCurrency").val("")});$(".InputFacility, .InputStorerKey").on("change",function(){$(".InputDetailsSku").empty().trigger("chosen:updated")});$(".NewRecord").find(".InputDetailsSku").on("change",function(){var n;if($(".NewDetailRecord:visible").length>0){n=$(this).val().toString();n=n.substring(n.lastIndexOf(",")+1);var t=$(this).find("option[value='"+n+"']").data("pack"),r=$(this).find("option[value='"+n+"']").data("packdescr"),i=$(".NewRecord").find(".InputDetailsPackKey");i.find("option[value='"+t+"']").length==0&&i.append("<option value='"+t+"' data-value1="+r+">"+t+"<\/option>");i.val(t).trigger("chosen:updated");AutoPostBackDetails($(".NewDetailRecord"),t)}})}if($(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement")$(".NewRecord").find(".InputStorerKey, .InputConsigneeKey, .InputDetailsSku").on("change",function(){$(".NewDetailRecord:visible").length>0&&SetPriceAndCurrency()});$(".btnDelete").click(function(){if($(".HeaderGridView:visible").length>0){if($(".HeaderGridView").find(".chkSelectGrd:checked").length>0){var n="";$(".chkSelectGrd:checked").each(function(){n=n==""?$(this).attr("data-id"):n+","+$(this).attr("data-id")});DeleteItems(n)}}else $(".MyRecordID").val()!=0&&DeleteItems($(".MyRecordID").val())});$(".btnDeleteDetail").click(function(){if($(".DetailsGridView:visible").length>0&&$(".DetailsGridView").find(".chkSelectGrd:checked").length>0){var n="";$(".chkSelectGrd:checked").each(function(){n=n==""?$(this).attr("data-id"):n+","+$(this).attr("data-id")});DeleteItemsDetails(n)}});$(".BtnDoSomeThing").click(function(){if($(".HeaderGridView:visible").length>0){if($(".chkSelectGrd:checked").length>0){var n="";$(".chkSelectGrd:checked").each(function(){n=n==""?$(this).attr("data-id"):n+","+$(this).attr("data-id")});ExecuteAction(n,$(this).attr("data-id"))}}else $(".MyRecordID").val()!=0&&ExecuteAction($(".MyRecordID").val(),$(this).attr("data-id"))});$(".AddDetailsBtn").click(function(){var n=$(".RecordsContainer_Inside:visible").length;$(".RecordsContainer_Inside").eq(0).clone().insertAfter($(".RecordsContainer_Inside").eq(n)).slideDown();setOnCufex_Resize();$(".MyContainerPopup").mCustomScrollbar("scrollTo",$(".RecordsContainer_Inside").eq(n+1));$(".RecordsContainer_Inside").eq(n+1).find(".chosen-container").remove();$(".RecordsContainer_Inside").eq(n+1).find(".chosen-select").chosen();$(".RecordsContainer_Inside").eq(n+1).find(".chosen-container").css("width","100%");$(".RecordsContainer_Inside").eq(n+1).find(".chosen-select").trigger("chosen:updated");$(".RecordsContainer_Inside").eq(n+1).find("input:text,select").each(function(){var n=$(this);n.attr("data-value")!=null?n.val(n.attr("data-value")):n.val("");n.attr("data-disabled")!=null?n.prop("disabled",!0):n.prop("disabled",!1)});$(".RecordsContainer_Inside").eq(n+1).find(".InputDetailsToLoc").val("STAGE").trigger("chosen:updated");$(".RecordsContainer_Inside").eq(n+1).find("select").prop("disabled",!1).trigger("chosen:updated");$(".RecordsContainer_Inside").eq(n+1).find(".InputDetailsUOM").empty().trigger("chosen:updated");$(".btnDeleteDtl").click(function(){var n=$(this);n.parent(".RecordsContainer_Inside").remove();setOnCufex_Resize()});$(".RecordsContainer_Inside").eq(n+1).find(".datepicker").removeClass("hasDatepicker");$(".RecordsContainer_Inside").eq(n+1).find(".datepicker").datepicker();$(".RecordsContainer_Inside").find(".InputAutoPostBackDetails").on("change",function(){var n=$(this).val().toString();AutoPostBackDetails($(this).closest(".RecordsContainer_Inside:visible"),n.substring(n.lastIndexOf(",")+1))});if($(".MainPageTitle").attr("data-id")=="Warehouse_ASN"||$(".MainPageTitle").attr("data-id")=="Warehouse_SO"||$(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement")$(".InputDetailsSku").on("change",function(){var n;if($(".RecordsContainer_Inside:visible").length>0){n=$(this).val().toString();n=n.substring(n.lastIndexOf(",")+1);var t=$(this).find("option[value='"+n+"']").data("pack"),r=$(this).find("option[value='"+n+"']").data("packdescr"),i=$(this).closest(".RecordsContainer_Inside:visible").find(".InputDetailsPackKey");i.find("option[value='"+t+"']").length==0&&i.append("<option value='"+t+"' data-value1="+r+">"+t+"<\/option>");i.val(t).trigger("chosen:updated");AutoPostBackDetails($(this).closest(".RecordsContainer_Inside:visible"),t)}});if($(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement")$(".InputStorerKey, .InputConsigneeKey, .InputDetailsSku").on("change",function(){$(".RecordsContainer_Inside:visible").length>0&&SetPriceAndCurrency()});$(".RecordsContainer_Inside:visible").find(".SearchDropDown").click(function(){var e=$(".NewHeaderRecord:visible").length>0?$(".NewHeaderRecord"):$(".RecordHeader"),n=$(this).data("requiredfields").split(","),u=$(this).data("requiredfieldsname").split(","),t="",f="",i,r;MyField1Value="";MyField2Value="";MyField1Name="";MyField2Name="";ErrorMsg="";n.length>0&&(t=n[0]);n.length>1&&(f=n[1]);u.length>0&&(MyField1Name=u[0]);u.length>1&&(MyField2Name=u[1]);t!=""&&(MyField1Value=e.find(t).val(),t==".InputFacility"&&(MyField1Value=e.find(t).find("option[value='"+MyField1Value+"']").attr("data-value1")));f!=""&&(MyField2Value=e.find(f).val());(MyField1Value==""||MyField1Value==null)&&n.length>0&&(ErrorMsg+=MyField1Name+" must be defined <br/>");(MyField2Value==""||MyField2Value==null)&&n.length>1&&(ErrorMsg+=MyField2Name+" must be defined <br/>");ErrorMsg!=""?swal({title:"Search",text:ErrorMsg.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1}):($(".SearchDropDown").removeClass("Active"),$(this).addClass("Active"),i=$(window).height()-600,i=i>0?i/2:0,r=$(window).width()-900,r=r>0?r/2:0,window.open($(this).data("url").replace(t,MyField1Value).replace(f,MyField2Value),"_blank","width=900,height=600,top="+i+",left="+r))});SetDropDownSingleSelection();SearchDropDown(".InputDetailsSku")});$(".btnActions").click(function(n){n.preventDefault();n.stopPropagation();$(".ActionHiddenButtons").slideToggle()});$(".ClosePopup").click(function(){$(".RecordsContainer_Inside:visible").remove();$(".FloatRecordField").find("input:password").removeClass("Error");$(".ErrorIcon").remove();$(".New_Modify_Record_PopUp").fadeOut();$(".MyRecordID").val(0);$(".jscolor").css("background-color","#FAFAFA");setTimeout(function(){$(".PortalLogo").attr("src",sAppPath+"images/Cufex_Images/logo.png")},500);$(".HiddenDetailLink").length>0&&window.history.pushState("object or string","0",$(".HiddenDetailLink").val())});$(".SaveRecordNow").click(function(){$(".MainPageTitle").attr("data-id")=="PORTALUSERS"?$("input[type='password']").hasClass("Error")||SaveItems():SaveItems()});$(".btnSave").click(function(){$(".MainPageTitle").attr("data-id")=="ChangePassword"?$("input[type='password']").hasClass("Error")||SaveItems():SaveItemsNew()});$(".btnExport,.btnExportDetails").click(function(){var n=$(".HeaderGridView:visible").length>0?$(".HeaderGridView"):$(".DetailsGridView");if(n.find(".PagingNumbers").html()=="0 of 0"){swal({title:"Export",text:"No Data to Export",type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});return}$(".HeaderGridView:visible").length>0?ExportItems():ExportItemsDetails()});$(".btnImport").click(function(){$(".ImportFileUpload").length>0&&($(".ImportFileUpload").val(""),$(".ImportFileUpload").click())});$(".ImportFileUpload").change(function(){var r,f,i;if($(this).val()!=""){var t="",n="";if(/^([a-zA-Z0-9\s_\\.\-:])+(.csv)$/.test($(this).val().toLowerCase())||(t="Please upload a valid CSV file"),t==""&&(r=$(this).val().split("\\").pop(),f=r.substring(0,r.indexOf("-")),f!=$(".MainPageTitle").data("id")&&(t="The imported file is not related to this screen")),t==""){for(var u=this.files[0].size,e=0;u>900;)u/=1024,e++;n=Math.round(u*100)/100+" "+["Bytes","KB","MB","GB"][e];i=!0;(n.indexOf("MB")>=0||n.indexOf("GB")>=0)&&(n.indexOf("MB")>=0?parseInt(n.substring(0,n.indexOf(" ")))>parseInt($(".HiddenFileImportLimit").val())&&(i=!1):i=!1);i||(t="File is too big ("+n+"). Max file size: "+$(".HiddenFileImportLimit").val()+" MB")}if(t!=""){swal({title:"Import",text:t,type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});return}ImportItems(n)}});$(".btnRefresh,.btnRefreshDetails").click(function(){$(".HeaderGridView:visible").length>0?(isFirstLoad=!1,CurrentPage=0,SortBy="id desc",$("#SortBy").length>0&&(SortBy=$("#SortBy").val()),$(".HeaderGridView").find(".SearchClass").val(""),$(".HeaderGridView").find(".SortUp,.SortDown").removeClass("Active"),$(".HeaderGridView").find(".Arrow-Left-Back").addClass("Disabled"),$(".HeaderGridView").find(".Arrow-Left-Back-First").addClass("Disabled"),$(".HeaderGridView").find(".Arrow-Right-Forward").addClass("Disabled"),$(".HeaderGridView").find(".Arrow-Right-Forward-Last").addClass("Disabled"),SearchQuery="",LoadItems()):(CurrentPageDetails=0,SortByDetails="id desc",$("#SortBy").length>0&&(SortByDetails=$("#SortBy").val()),$(".DetailsGridView").find(".SearchClass").val(""),$(".DetailsGridView").find(".SortUp,.SortDown").removeClass("Active"),$(".HeaderGridView").find(".Arrow-Left-Back").addClass("Disabled"),$(".HeaderGridView").find(".Arrow-Left-Back-First").addClass("Disabled"),$(".HeaderGridView").find(".Arrow-Right-Forward").addClass("Disabled"),$(".HeaderGridView").find(".Arrow-Right-Forward-Last").addClass("Disabled"),SearchQueryDetails="",LoadItemsDetails())});$(".datepicker").datepicker();$(".checkRadio").checkboxradio({icon:!1});$(".chosen-select").chosen({disable_search_threshold:10,width:"100%",search_contains:!1});$(".chosen-select").on("chosen:showing_dropdown",function(){$(".content_4").mCustomScrollbar("disable")});$(".chosen-select").on("chosen:hiding_dropdown",function(){$(".content_4").mCustomScrollbar("update")});$(".NewHeaderRecord").find(".chosen-select").on("chosen:showing_dropdown",function(){$(".NewHeaderRecord").removeClass("u-overflowHidden")});n=!0;$(".GridCell").find(".chosen-select").on("chosen:showing_dropdown",function(){n=!1;$(".content_3").mCustomScrollbar("disable");$(this).parents("div").css("overflow","visible");$(this).siblings(".chosen-container").find(".search-field").show();setTimeout(function(){InitColResizable();n=!0},300)});$(".GridCell").find(".chosen-select").on("chosen:hiding_dropdown",function(){if(n){if($(".content_3").mCustomScrollbar("update"),$(this).parents("div").css("overflow",""),setTimeout(function(){InitColResizable()},300),$(this).val()=="")return;$(this).siblings(".chosen-container").find(".search-field").hide()}});$(".GridCell").find(".chosen-select").on("change",function(){$(this).val()==""&&$(this).siblings(".chosen-container").find(".search-field").show()});$(".MyTab").length>0&&(MoveTabLine(0),$(".MyTab").click(function(){if($(".MyTab").removeClass("Active"),$(this).addClass("Active"),MoveTabLine($(this).index()),$(".MainPageTitle").attr("data-id")=="PROFILEDETAIL"){$(".GridContainer").addClass("DisplayNone");$(".btnDelete").addClass("DisplayNone");$(".btnDelete").parent("td").prev("td").hide();var n=$(this).data("id");n=="Actions"?$(".GridActions").removeClass("DisplayNone"):n=="Reports"?$(".GridReports").removeClass("DisplayNone"):n=="Dashboards"&&($(".GridDashboards").removeClass("DisplayNone"),$(".btnDelete").removeClass("DisplayNone"),$(".btnDelete").parent("td").prev("td").show(),setOnCufex_Resize());CurrentPage=0;$(".SearchClass").val("");SearchQuery="";SortBy="id desc";LoadItems();setTimeout(function(){InitColResizable()},300)}SetMasterResize()}));$(".HiddenID").val()!=0&&$(".HiddenID").length>0?(AvoidWebServiceRaceCondition=0,t=$(".HiddenID").val(),$(".HiddenID").val(0),$(".NewRecord").length>0?DisplayItemNew(t,""):DisplayItem(t,"")):setTimeout(function(){$(".preloader").fadeOut()},1500);$(".textRecordStylePassword").blur(function(){$(this).removeClass("Error");$(this).siblings(".ErrorIcon").remove();$(this).val()!=""&&($(this).val().match(/^(?=.*?[A-Z])(?=(.*[a-z]){1,})(?=(.*[\d]){1,})(?=(.*[\W]){1,})(?!.*\s).{10,}$/)||($(this).addClass("Error"),$(this).after("<div class='ErrorIcon' title='Password must be at least 10 characters, have one upper case letter, one lower case letter, one special character and one base 10 digits (0 to 9)'><\/div>")))});$(".InputPortalLogo").change(function(){i(this)});$(".NewRecord, .RecordHeader").find(".SearchDropDown").click(function(){var e=$(".NewHeaderRecord:visible").length>0?$(".NewHeaderRecord"):$(".RecordHeader"),n=$(this).data("requiredfields").split(","),u=$(this).data("requiredfieldsname").split(","),t="",f="",i,r;MyField1Value="";MyField2Value="";MyField1Name="";MyField2Name="";ErrorMsg="";n.length>0&&(t=n[0]);n.length>1&&(f=n[1]);u.length>0&&(MyField1Name=u[0]);u.length>1&&(MyField2Name=u[1]);t!=""&&(MyField1Value=e.find(t).val(),t==".InputFacility"&&(MyField1Value=e.find(t).find("option[value='"+MyField1Value+"']").attr("data-value1")));f!=""&&(MyField2Value=e.find(f).val());(MyField1Value==""||MyField1Value==null)&&n.length>0&&(ErrorMsg+=MyField1Name+" must be defined <br/>");(MyField2Value==""||MyField2Value==null)&&n.length>1&&(ErrorMsg+=MyField2Name+" must be defined <br/>");ErrorMsg!=""?swal({title:"Search",text:ErrorMsg.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1}):($(".SearchDropDown").removeClass("Active"),$(this).addClass("Active"),i=$(window).height()-600,i=i>0?i/2:0,r=$(window).width()-900,r=r>0?r/2:0,window.open($(this).data("url").replace(t,MyField1Value).replace(f,MyField2Value),"_blank","width=900,height=600,top="+i+",left="+r))});SetDropDownSingleSelection()}function SetDropDownSingleSelection(){var t=0,n=0;$(".chosen-select[data-mode='single']").change(function(){var i=$(this).siblings(".chosen-container").find(".search-choice").find("span").html().toUpperCase();if(n=$(this).val(),n.length>1&&n.toString().split(",")[1]==i){$(this).val(n[0]).trigger("chosen:updated");return}n&&n.length>1&&$(this).val([t=n[1]!==t?n[1]:n[0]]).trigger("chosen:updated")})}function ChangeColumnsOrder(n){n.each(function(){var n=$(this).children(".GridCell");n.sort(function(n,t){var i=$(n).attr("data-priority")==null?0:parseInt($(n).attr("data-priority")),r=$(t).attr("data-priority")==null?0:parseInt($(t).attr("data-priority"));return i-r});$(this).html(n)})}function ShowHideColumns(n){n.children(".GridCell").each(function(){var n=$(this);n.attr("data-hidden")=="true"?n.hide():n.show()})}function PageTable(n){var r=$("."+n).find(".GridResults").size(),i=n=="HeaderGridView"?CurrentPage:CurrentPageDetails,t=n=="HeaderGridView"?NumberOfRecordsInPage:NumberOfRecordsInPageDetails,u=1+i*t,f=(i+1)*t>r?r:(i+1)*t;$("."+n).find(".PagingNumbers").html(u+"-"+f+" of "+r);r>t&&$("."+n).find(".GridResults").hide().slice(i*t,(i+1)*t).show()}function PageTableTab(n){var t=$("."+n).find(".GridResults").size(),i=1+CurrentPage*NumberOfRecordsInPage,r=(CurrentPage+1)*NumberOfRecordsInPage>t?t:(CurrentPage+1)*NumberOfRecordsInPage;$(".PagingNumbers").html(i+"-"+r+" of "+t);t>NumberOfRecordsInPage&&$("."+n).find(".GridResults").hide().slice(CurrentPage*NumberOfRecordsInPage,(CurrentPage+1)*NumberOfRecordsInPage).show()}function SetGridActions(){function t(t,i){var h,e,s,f,c,l,o,b=0,k=$(".HeaderGridView:visible").length>0?0:1,a="GridContainer",r,u;for($(".MyTab").length>0&&(a="Grid"+$(".MyTab.Active").data("id")),h=document.getElementsByClassName(a)[k],s=!0;s;){for(s=!1,e=h.rows,f=2;f<e.length-1;f++){o=!1;c=e[f].getElementsByClassName("GridCell")[t];l=e[f+1].getElementsByClassName("GridCell")[t];r=$.trim(c.innerHTML);u=$.trim(l.innerHTML);r.indexOf("<a")>=0&&r.indexOf("<\/a>")>=0&&(r=$.trim(r.split(">")[1].split("<\/a")[0]));u.indexOf("<a")>=0&&u.indexOf("<\/a>")>=0&&(u=$.trim(u.split(">")[1].split("<\/a")[0]));var v=$.trim(r.split("<br>")[0]),y=$.trim(r.replace("<br>","")),p=$.trim(u.split("<br>")[0]),w=$.trim(u.replace("<br>",""));if(i=="asc"){if(n(v)&&n(p)){if(new Date(y)>new Date(w)){o=!0;break}}else if(r.toLowerCase()>u.toLowerCase()){o=!0;break}}else if(i=="desc")if(n(v)&&n(p)){if(new Date(y)<new Date(w)){o=!0;break}}else if(r.toLowerCase()<u.toLowerCase()){o=!0;break}}o&&(e[f].parentNode.insertBefore(e[f+1],e[f]),s=!0,b++)}}function n(n){if(!n.match(/^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)dd$/))return!1;var t=new Date(n);return!isNaN(t.valueOf())}function r(){var n="",t;t=$(".HeaderGridView:visible").length>0?$(".MyFields[data-columnname]"):$(".MyDetailsFields[data-columnname]");t.each(function(t){var i=$(this),r=i.attr("data-primarykey")=="true";n+="<div class='ColumnContainer"+(r?" IsPrimaryKey":"")+"' data-id = '"+i.val()+"' data-priority='"+(t+1)+"' data-hidden='false'>"+i.data("columnname")+(r?"":"<div class='ColumnChooserAction'><\/div>")+"<\/div>"});$(".GridColumnsChooser").find(".mCSB_container").html(n);i()}function u(){$(".HeaderGridView:visible").length>0?($(".HeaderGridView").find(".GridContainer").data("resizemode")=="overflow"&&$(".preloader").fadeIn(),$(".ColumnContainer").each(function(){var r=$(this).data("id"),n=$(this).data("hidden"),i=$(this).data("priority"),u=$(".HeaderGridView").find(".GridAdjust").children(".GridCell[data-id='"+r+"']"),t=u.index();u.attr("data-priority",i);u.attr("data-hidden",n);$(".MyFields[value='"+r+"']").attr("data-priority",i);$(".MyFields[value='"+r+"']").attr("data-hidden",n);$(".HeaderGridView").find(".SearchStyle").children(".GridCell").eq(t).attr("data-priority",i);$(".HeaderGridView").find(".SearchStyle").children(".GridCell").eq(t).attr("data-hidden",n);$(".HeaderGridView").find(".NoResults").children(".GridCell").eq(t).attr("data-hidden",n);$(".HeaderGridView").find(".GridResults").each(function(){$(this).children(".GridCell").eq(t).attr("data-hidden",n);$(this).children(".GridCell").eq(t).attr("data-priority",i)})}),ShowHideColumns($(".HeaderGridView").find(".GridRow")),ChangeColumnsOrder($(".HeaderGridView").find(".GridRow")),$(".HeaderGridView").find(".GridRow").not(".NoResults").each(function(){var n=$(this).children(".GridCell[data-priority]");n.removeClass("borderRight0");n.eq(n.length-1).addClass("borderRight0")})):($(".DetailsGridView").find(".GridContainer").data("resizemode")=="overflow"&&$(".preloader").fadeIn(),$(".ColumnContainer").each(function(n){var r=$(this).data("id"),t=$(this).data("hidden"),u=$(".DetailsGridView").find(".GridAdjust").children(".GridCell[data-id='"+r+"']"),i=u.index();u.attr("data-priority",n+1);u.attr("data-hidden",t);$(".MyDetailsFields[value='"+r+"']").attr("data-priority",n+1);$(".MyDetailsFields[value='"+r+"']").attr("data-hidden",t);$(".DetailsGridView").find(".SearchStyle").children(".GridCell").eq(i).attr("data-priority",n+1);$(".DetailsGridView").find(".SearchStyle").children(".GridCell").eq(i).attr("data-hidden",t);$(".DetailsGridView").find(".NoResults").children(".GridCell").eq(i).attr("data-hidden",t);$(".DetailsGridView").find(".GridResults").each(function(){$(this).children(".GridCell").eq(i).attr("data-hidden",t);$(this).children(".GridCell").eq(i).attr("data-priority",n+1)})}),ShowHideColumns($(".DetailsGridView").find(".GridRow")),ChangeColumnsOrder($(".DetailsGridView").find(".GridRow")),$(".DetailsGridView").find(".GridRow").not(".NoResults").each(function(){var n=$(this).children(".GridCell[data-priority]");n.removeClass("borderRight0");n.eq(n.length-1).addClass("borderRight0")}));$(".Adjust_Columns_PopUp").fadeOut();setOnCufex_Resize();InitColResizable();setTimeout(function(){SetUserConfigution();setTimeout(function(){$(".GridCell").find(".chosen-container").remove();$(".GridCell").find(".chosen-select").chosen({disable_search_threshold:10,width:"100%",search_contains:!1});var n=!0;$(".GridCell").find(".chosen-select").on("chosen:showing_dropdown",function(){n=!1;$(".content_3").mCustomScrollbar("disable");$(this).parents("div").css("overflow","visible");$(this).siblings(".chosen-container").find(".search-field").show();setTimeout(function(){InitColResizable();n=!0},300)});$(".GridCell").find(".chosen-select").on("chosen:hiding_dropdown",function(){if(n){if($(".content_3").mCustomScrollbar("update"),$(this).parents("div").css("overflow",""),setTimeout(function(){InitColResizable()},300),$(this).val()=="")return;$(this).siblings(".chosen-container").find(".search-field").hide()}});$(".GridCell").find(".chosen-select").on("change",function(){$(this).val()==""&&$(this).siblings(".chosen-container").find(".search-field").show()});$("body").on("keydown",".GridCell .chosen-search-input",function(n){n.which===13&&$(this).closest(".chosen-container").find(".chosen-single-with-drop").length===0&&setTimeout(function(){$(".GridSearch").trigger("click")},300)})},1e3)},500)}function i(){$(".ColumnChooserAction").click(function(){$(this).hasClass("AddColumn")?($(this).removeClass("AddColumn"),$(this).parent(".ColumnContainer").removeClass("Inactive"),$(this).parent(".ColumnContainer").attr("data-hidden","false")):($(this).addClass("AddColumn"),$(this).parent(".ColumnContainer").addClass("Inactive"),$(this).parent(".ColumnContainer").attr("data-hidden","true"))})}$(".GridContainer").on("click",".GridHead[data-id]",function(){var n,i=$(".HeaderGridView:visible").length>0?$(".HeaderGridView"):$(".DetailsGridView"),r=$(".HeaderGridView:visible").length>0?"HeaderGridView":"DetailsGridView";$("MyTab").length>0&&(i=$(".Grid"+$(".MyTab.Active").data("id")),r="Grid"+$(".MyTab.Active").data("id"));$(this).find(".SortUp").hasClass("Active")?(i.find(".SortUp,.SortDown").removeClass("Active"),$(this).find(".SortDown").addClass("Active"),$(".HeaderGridView:visible").length>0?SortBy=$(this).find(".SortDown").parent().parent().attr("data-id")+" desc":SortByDetails=$(this).find(".SortDown").parent().parent().attr("data-id")+" desc",n="desc"):(i.find(".SortUp,.SortDown").removeClass("Active"),$(this).find(".SortUp").addClass("Active"),$(".HeaderGridView:visible").length>0?SortBy=$(this).find(".SortUp").parent().parent().attr("data-id")+" asc":SortByDetails=$(this).find(".SortUp").parent().parent().attr("data-id")+" asc",n="asc");$(".GridResults").length>0&&(t($(this).index(),n),$("MyTab").length>0?PageTableTab(r):PageTable(r),$(".Arrow-Left-Back-First").trigger("click"))});$(".GridContainer").on("click",".SortUp",function(n){n.stopPropagation();var r=$(".HeaderGridView:visible").length>0?$(".HeaderGridView"):$(".DetailsGridView"),i=$(".HeaderGridView:visible").length>0?"HeaderGridView":"DetailsGridView";$("MyTab").length>0&&(r=$(".Grid"+$(".MyTab.Active").data("id")),i="Grid"+$(".MyTab.Active").data("id"));r.find(".SortUp,.SortDown").removeClass("Active");$(this).addClass("Active");$(".HeaderGridView:visible").length>0?SortBy=$(this).parent().parent().attr("data-id")+" asc":SortByDetails=$(this).parent().parent().attr("data-id")+" asc";$(".GridResults").length>0&&(t($(this).closest(".GridCell").index(),"asc"),$("MyTab").length>0?PageTableTab(i):PageTable(i),$(".Arrow-Left-Back-First").trigger("click"))});$(".GridContainer").on("click",".SortDown",function(n){n.stopPropagation();var r=$(".HeaderGridView:visible").length>0?$(".HeaderGridView"):$(".DetailsGridView"),i=$(".HeaderGridView:visible").length>0?"HeaderGridView":"DetailsGridView";$("MyTab").length>0&&(r=$(".Grid"+$(".MyTab.Active").data("id")),i="Grid"+$(".MyTab.Active").data("id"));r.find(".SortUp,.SortDown").removeClass("Active");$(this).addClass("Active");$(".HeaderGridView:visible").length>0?SortBy=$(this).parent().parent().attr("data-id")+" desc":SortByDetails=$(this).parent().parent().attr("data-id")+" desc";$(".GridResults").length>0&&(t($(this).closest(".GridCell").index(),"desc"),$("MyTab").length>0?PageTableTab(i):PageTable(i),$(".Arrow-Left-Back-First").trigger("click"))});$(".AC_PopupAction_Reset").click(function(){r()});$(".AC_PopupAction_Apply").click(function(){u()});$(".GridContainer").on("click",".AdjustColumns",function(){var n,t,r;$(this).closest(".HeaderGridView").length>0?(n=$(".HeaderGridView"),t=".MyFields"):(n=$(".DetailsGridView"),t=".MyDetailsFields");r="";n.find(".GridAdjust").children(".GridCell[data-id]").each(function(n){var i=$(this),u=i.attr("data-hidden")=="true",f=$(t+"[value='"+i.data("id")+"']").attr("data-primarykey")=="true";r+="<div class='ColumnContainer"+(f?" IsPrimaryKey":"")+" "+(u?" Inactive":"")+"' data-id = '"+i.data("id")+"' data-priority='"+(n+1)+"' data-hidden='"+(u?"true":"false")+"'>"+i.text()+(f?"":"<div class='ColumnChooserAction"+(u?" AddColumn":"")+"'><\/div>")+"<\/div >"});$(".GridColumnsChooser").find(".mCSB_container").html(r);i();$(".GridColumnsChooser").sortable({items:'.ColumnContainer:not(".IsPrimaryKey")',update:function(){$(".ColumnContainer").each(function(){$(this).attr("data-priority",$(this).index()+1)})}});$(".Adjust_Columns_PopUp").fadeIn()});$(".GridContainer").on("click",".EraseSearch",function(){$(".HeaderGridView:visible").length>0?($(".HeaderGridView").find(".SearchClass").val(""),$(".HeaderGridView").find(".chosen-select").val("").trigger("chosen:updated"),SearchQuery=""):($(".DetailsGridView").find(".SearchClass").val(""),$(".DetailsGridView").find(".chosen-select").val("").trigger("chosen:updated"),SearchQueryDetails="")});$(".GridContainer").on("click",".GridSearch",function(){$(".HeaderGridView:visible").length>0?(SearchQuery="",$(".HeaderGridView").find(".SearchClass").each(function(){$(this).val()!=""&&(SearchQuery=SearchQuery+(SearchQuery!=""?",":"")+$(this).attr("data-id")+":"+$(this).val().toString().replace(",",";"))}),$(".Arrow-Left-Back-First").trigger("click"),isFirstLoad=!1,$(".HeaderGridView").find(".GridContainer").hasClass("GridPopup")?LoadItemsPopup():LoadItems()):(SearchQueryDetails="",$(".DetailsGridView").find(".SearchClass").each(function(){$(this).val()!=""&&(SearchQueryDetails=SearchQueryDetails+(SearchQueryDetails!=""?",":"")+$(this).attr("data-id")+":"+$(this).val().toString().replace(",",";"))}),$(".Arrow-Left-Back-First").trigger("click"),LoadItemsDetails())});$(".GridContainer").on("keypress",".SearchClass",function(n){SearchQuery="";SearchQueryDetails="";n.keyCode==13&&(n.preventDefault(),$(".HeaderGridView:visible").length>0?($(".HeaderGridView").find(".SearchClass").each(function(){SearchQuery==""?$(this).val()!=""&&(SearchQuery=$(this).attr("data-id")+":"+$(this).val().toString().replace(",",";")):$(this).val()!=""&&(SearchQuery=SearchQuery+","+$(this).attr("data-id")+":"+$(this).val().toString().replace(",",";"))}),$(".Arrow-Left-Back-First").trigger("click"),isFirstLoad=!1,$(".HeaderGridView").find(".GridContainer").hasClass("GridPopup")?LoadItemsPopup():LoadItems()):($(".DetailsGridView").find(".SearchClass").each(function(){SearchQueryDetails==""?$(this).val()!=""&&(SearchQueryDetails=$(this).attr("data-id")+":"+$(this).val().toString().replace(",",";")):$(this).val()!=""&&(SearchQueryDetails=SearchQueryDetails+","+$(this).attr("data-id")+":"+$(this).val().toString().replace(",",";"))}),$(".Arrow-Left-Back-First").trigger("click"),LoadItemsDetails()))});$(".GridContainer").on("change",".chkSelectAll",function(){var n=$(".HeaderGridView:visible").length>0?$(".HeaderGridView"):$(".DetailsGridView");n.find(".chkSelectGrd:enabled").prop("checked",$(this).is(":checked"))});$(".HeaderGridView").find(".Arrow-Left-Back").addClass("Disabled");$(".DetailsGridView").find(".Arrow-Left-Back").addClass("Disabled");$(".Arrow-Left-Back").unbind("click").click(function(){if($(".HeaderGridView:visible").length>0){if(CurrentPage=parseInt(CurrentPage)-1,CurrentPage<0){CurrentPage=0;return}CurrentPage==0?($(".HeaderGridView").find(".Arrow-Left-Back").addClass("Disabled"),$(".HeaderGridView").find(".Arrow-Left-Back-First").addClass("Disabled")):($(".HeaderGridView").find(".Arrow-Left-Back").removeClass("Disabled"),$(".HeaderGridView").find(".Arrow-Left-Back-First").removeClass("Disabled"));MaxPages!=1&&($(".HeaderGridView").find(".Arrow-Right-Forward").removeClass("Disabled"),$(".HeaderGridView").find(".Arrow-Right-Forward-Last").removeClass("Disabled"));$("MyTab").length>0?PageTableTab("Grid"+$(".MyTab.Active").data("id")):PageTable("HeaderGridView")}else{if(CurrentPageDetails=parseInt(CurrentPageDetails)-1,CurrentPageDetails<0){CurrentPageDetails=0;return}CurrentPageDetails==0?($(".DetailsGridView").find(".Arrow-Left-Back").addClass("Disabled"),$(".DetailsGridView").find(".Arrow-Left-Back-First").addClass("Disabled")):($(".DetailsGridView").find(".Arrow-Left-Back").removeClass("Disabled"),$(".DetailsGridView").find(".Arrow-Left-Back-First").removeClass("Disabled"));MaxPagesDetails!=1&&($(".DetailsGridView").find(".Arrow-Right-Forward").removeClass("Disabled"),$(".DetailsGridView").find(".Arrow-Right-Forward-Last").removeClass("Disabled"));PageTable("DetailsGridView")}});$(".HeaderGridView").find(".Arrow-Left-Back-First").addClass("Disabled");$(".DetailsGridView").find(".Arrow-Left-Back-First").addClass("Disabled");$(".Arrow-Left-Back-First").unbind("click").click(function(){if($(".HeaderGridView:visible").length>0){if(CurrentPage==0)return;$(".HeaderGridView").find(".Arrow-Left-Back-First").addClass("Disabled");$(".HeaderGridView").find(".Arrow-Left-Back").addClass("Disabled");MaxPages!=1&&($(".HeaderGridView").find(".Arrow-Right-Forward").removeClass("Disabled"),$(".HeaderGridView").find(".Arrow-Right-Forward-Last").removeClass("Disabled"));CurrentPage=0;$("MyTab").length>0?PageTableTab("Grid"+$(".MyTab.Active").data("id")):PageTable("HeaderGridView")}else{if(CurrentPageDetails==0)return;$(".DetailsGridView").find(".Arrow-Left-Back-First").addClass("Disabled");$(".DetailsGridView").find(".Arrow-Left-Back").addClass("Disabled");MaxPagesDetails!=1&&($(".DetailsGridView").find(".Arrow-Right-Forward").removeClass("Disabled"),$(".DetailsGridView").find(".Arrow-Right-Forward-Last").removeClass("Disabled"));CurrentPageDetails=0;PageTable("DetailsGridView")}});$(".HeaderGridView").find(".Arrow-Right-Forward").addClass("Disabled");$(".DetailsGridView").find(".Arrow-Right-Forward").addClass("Disabled");$(".Arrow-Right-Forward").unbind("click").click(function(){if($(".HeaderGridView:visible").length>0){if(CurrentPage=parseInt(CurrentPage)+1,CurrentPage>=MaxPages){CurrentPage=MaxPages;return}CurrentPage==MaxPages-1?($(".HeaderGridView").find(".Arrow-Right-Forward").addClass("Disabled"),$(".HeaderGridView").find(".Arrow-Right-Forward-Last").addClass("Disabled")):($(".HeaderGridView").find(".Arrow-Right-Forward").removeClass("Disabled"),$(".HeaderGridView").find(".Arrow-Right-Forward-Last").removeClass("Disabled"));MaxPages!=1&&($(".HeaderGridView").find(".Arrow-Left-Back").removeClass("Disabled"),$(".HeaderGridView").find(".Arrow-Left-Back-First").removeClass("Disabled"));$("MyTab").length>0?PageTableTab("Grid"+$(".MyTab.Active").data("id")):PageTable("HeaderGridView")}else{if(CurrentPageDetails=parseInt(CurrentPageDetails)+1,CurrentPageDetails>=MaxPagesDetails){CurrentPageDetails=MaxPagesDetails;return}CurrentPageDetails==MaxPagesDetails-1?($(".DetailsGridView").find(".Arrow-Right-Forward").addClass("Disabled"),$(".DetailsGridView").find(".Arrow-Right-Forward-Last").addClass("Disabled")):($(".DetailsGridView").find(".Arrow-Right-Forward").removeClass("Disabled"),$(".DetailsGridView").find(".Arrow-Right-Forward-Last").removeClass("Disabled"));MaxPagesDetails!=1&&($(".DetailsGridView").find(".Arrow-Left-Back").removeClass("Disabled"),$(".DetailsGridView").find(".Arrow-Left-Back-First").removeClass("Disabled"));PageTable("DetailsGridView")}});$(".HeaderGridView").find(".Arrow-Right-Forward-Last").addClass("Disabled");$(".DetailsGridView").find(".Arrow-Right-Forward-Last").addClass("Disabled");$(".Arrow-Right-Forward-Last").unbind("click").click(function(){if($(".HeaderGridView:visible").length>0){if(CurrentPage==MaxPages-1)return;$(".HeaderGridView").find(".Arrow-Right-Forward-Last").addClass("Disabled");$(".HeaderGridView").find(".Arrow-Right-Forward").addClass("Disabled");MaxPages!=1&&($(".HeaderGridView").find(".Arrow-Left-Back").removeClass("Disabled"),$(".HeaderGridView").find(".Arrow-Left-Back-First").removeClass("Disabled"));CurrentPage=MaxPages-1;$("MyTab").length>0?PageTableTab("Grid"+$(".MyTab.Active").data("id")):PageTable("HeaderGridView")}else{if(CurrentPageDetails==MaxPagesDetails-1)return;$(".DetailsGridView").find(".Arrow-Right-Forward-Last").addClass("Disabled");$(".DetailsGridView").find(".Arrow-Right-Forward").addClass("Disabled");MaxPagesDetails!=1&&($(".DetailsGridView").find(".Arrow-Left-Back").removeClass("Disabled"),$(".DetailsGridView").find(".Arrow-Left-Back-First").removeClass("Disabled"));CurrentPageDetails=MaxPagesDetails-1;PageTable("DetailsGridView")}});$("body").on("keydown",".GridCell .chosen-search-input",function(n){n.which===13&&$(this).closest(".chosen-container").find(".chosen-single-with-drop").length===0&&setTimeout(function(){$(".GridSearch").trigger("click")},300)})}function SetDropZone(){$(".dropzone").length>0&&(myDropzone=new Dropzone(".dropzone",{url:sAppPath+"WebServices/FileUpload.ashx",addRemoveLinks:$(".HiddenCanRemoveOwnFiles").val()==0&&$(".HiddenCanRemoveOwnFiles").val()==0?!1:!0,maxFilesize:$(".HiddenFileUploadLimit").val(),autoProcessQueue:!1,success:function(n){n.previewElement.classList.add("dz-success")},error:function(n){n.previewElement.classList.add("dz-error")},removedfile:function(n){if(n.status!="queued"&&n.status!="canceled"&&n.status!="error"&&n.status!="added"&&n.status!="success"){var t=UploadedFileAction(n.name,n.size,"delete");t&&n.previewElement.remove()}else n.previewElement.remove();$(".dz-preview").length==0&&$(".dz-default").show()},init:function(){this.on("addedfile",function(n){$(".HiddenCanUploadFiles").val()==0?(swal({title:"File Upload",text:"You do not have permission to upload files",type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1}),this.removeFile(n)):$(".dz-default").hide()});this.on("error",function(n,t){n.status!="canceled"&&(swal({title:"File Upload",text:t,type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1}),this.removeFile(n))})}}))}function SetUITemplate(){$(".HiddenLoginBackgroundColor").val()!=""&&$(".CufexBG").css({"background-image":"none","background-color":$(".HiddenLoginBackgroundColor").val()});$(".HiddenScreenBackgroundColor").val()!=""&&$(".NormalDiv1118Max,.MainTabs,.GiveMeHeight,.MyAbso_Record_PopUpContainer,.RecordsContainer_Inside,.MyAbso_Adjust_Columns_PopUpContainer").css({"background-color":$(".HiddenScreenBackgroundColor").val()});$(".HiddenButtonBackgroundColor").val()!=""&&$(".Arrow-Left-Back,.Arrow-Left-Back-First,.Arrow-Right-Forward,.Arrow-Right-Forward-Last,.SortUp,.SortDown,.btnExport,.btnImport,.btnRefresh,.btnExportDetails,.btnRefreshDetails,.BackBtn,.SaveRecordNow,.ClosePopup,.btnDeleteDtl,.CloseACPopup").css({"background-color":$(".HiddenButtonBackgroundColor").val()});$(".HiddenTextBackgroundColor").val()!=""&&($(".MenuItemName,.MyTitleHead,.R_PopupTitle,.FloatRecordTitleNew,.Details_FloatRecordTitleNew").css({"background-color":$(".HiddenTextBackgroundColor").val()}),$(".MenuSubItem").find("a").css({"background-color":$(".HiddenTextBackgroundColor").val()}),$(".MainPageTitle").parent("div").css({"background-color":$(".HiddenTextBackgroundColor").val()}),$(".FloatRecordTitle,.Details_FloatRecordTitle,.GridContentCell").each(function(){var n=$(this).html();$(this).html("<span style='background-color:"+$(".HiddenTextBackgroundColor").val()+"'>"+n+"<\/span>")}),$(".NoResults").find(".GridContentCell[data-id=1]").each(function(){var n=$(this).html();$(this).html("<span style='background-color:"+$(".HiddenTextBackgroundColor").val()+"'>"+n+"<\/span>")}));$(".HiddenGridBackgroundColor").val()!=""&&$(".GridRow").css({"background-color":$(".HiddenGridBackgroundColor").val()})}function SetCarrierEvents(){$(".CarrierEventsBtn").unbind("click").click(function(){$(".CarrierEventsBtn").hasClass("Inactive")||NtorKermelElraceCondition==0&&(disable_scroll(),NtorKermelElraceCondition=1,$(".CarrierEventsMenuContainer").addClass("Active"),$(".CarrierEventsMenu").css({left:$(window).width()-$(".CarriersDiv").width()}),$(".CarriersDiv").height($(".CarrierEventsMenuContainer").height()-$(".CarrierEventsHeader").outerHeight()-30),setTimeout(function(){NtorKermelElraceCondition=0},300))});$(".CloseCarrierEvents").unbind("click").click(function(){NtorKermelElraceCondition==0&&(NtorKermelElraceCondition=1,$(".CarrierEventsMenuContainer").removeClass("Active"),$(".CarrierEventsMenu").css({left:"100%"}),$(".CarriersDiv").height(0),$(".CarrierEventInfo").hide(),$(".CarrierDiv").removeClass("Active"),$(this).addClass("Active"),$(".CarrierIndicator").css({top:0,height:$(".CarrierDiv").eq(0).outerHeight()}),setTimeout(function(){enable_scroll();NtorKermelElraceCondition=0},300))})}function DeleteItems(n){function t(n){var t=jQuery.parseJSON(n),i=!0;Object.keys(t).length>0?$.trim(t.Result)!==""&&(i=!1,setTimeout(function(){swal({title:"Delete",text:t.Result.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})},500)):console.log("Couldn't Delete Your Record");i&&(AvoidWebServiceRaceCondition=0,$(".BackHeader").trigger("click"),$(".HeaderGridView").mCustomScrollbar("scrollTo","first"),$(".HeaderGridView").mCustomScrollbar("update"),isFirstLoad=!0,LoadItems());console.log("Delete Items API End Time: "+GetTime())}function i(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}AvoidWebServiceRaceCondition==0&&(AvoidWebServiceRaceCondition=1,console.log("Delete Items API Start Time: "+GetTime()),swal({title:"Delete",text:"Are you sure you want to remove this record?",type:"warning",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!0},function(r){if(r){$(".preloader").fadeIn();var f=sAppPath+"WebServices/DeleteItems.ashx",u=new FormData;u.append("SearchTable",$(".MainPageTitle").attr("data-id"));u.append("MyItems",n);u.append("QueryUrlStr",$(".QueryUrlStr").val());$.ajax({type:"POST",contentType:!1,processData:!1,data:u,url:f+"/ExecuteQuery",success:t,error:i})}else AvoidWebServiceRaceCondition=0}))}function DeleteItemsDetails(n){function t(n){var t=jQuery.parseJSON(n),i=!0;Object.keys(t).length>0?$.trim(t.Result)!==""&&(i=!1,setTimeout(function(){swal({title:"Delete",text:t.Result.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})},500)):console.log("Couldn't Delete Your Record");i&&(AvoidWebServiceRaceCondition=0,isFirstLoad=!0,LoadItemsDetails());console.log("Delete Items Details API End Time: "+GetTime())}function i(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}AvoidWebServiceRaceCondition==0&&(console.log("Delete Items Details API Start Time: "+GetTime()),AvoidWebServiceRaceCondition=1,swal({title:"Delete",text:"Are you sure you want to remove this record?",type:"warning",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!0},function(r){if(r){$(".preloader").fadeIn();var f=sAppPath+"WebServices/DeleteItemsDetails.ashx",u=new FormData;u.append("SearchTable",$(".MainPageTitle").attr("data-id"));u.append("MyItems",n);u.append("Facility",$(".NewHeaderRecord").find(".InputFacility").val());$.ajax({type:"POST",contentType:!1,processData:!1,data:u,url:f+"/ExecuteQuery",success:t,error:i})}else AvoidWebServiceRaceCondition=0}))}function UploadedFileAction(n,t,i){function f(n){var i=n.split("~~~"),t=i[0];t!=""&&(u=!1,swal({title:"Delete File",text:t,type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1}));setTimeout(function(){AvoidWebServiceRaceCondition=0},300)}function e(n){u=!1;console.log(n.error);setTimeout(function(){AvoidWebServiceRaceCondition=0},300)}var u=!0,r;return AvoidWebServiceRaceCondition=0,AvoidWebServiceRaceCondition==0&&(AvoidWebServiceRaceCondition=1,r="",$(".MainPageTitle").attr("data-id")=="Warehouse_PO"?r=$(".NewHeaderRecord").find(".InputPOKey").val():$(".MainPageTitle").attr("data-id")=="Warehouse_ASN"?r=$(".NewHeaderRecord").find(".InputReceiptKey").val():$(".MainPageTitle").attr("data-id")=="Warehouse_SO"?r=$(".NewHeaderRecord").find(".InputOrderKey").val():$(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement"&&(r=$(".NewHeaderRecord").find(".InputOrderManagKey").val()),$.ajax({url:sAppPath+"WebServices/FileUpload.ashx",type:"POST",data:{Facility:$(".NewHeaderRecord").find(".InputFacility ").siblings(".chosen-container").find(".search-choice").find("span").html(),Key:r,SearchTable:$(".MainPageTitle").attr("data-id"),FileName:n,FileSize:t,ActivityType:i},success:f,error:e})),u}function SaveItems(){function i(n){var t=jQuery.parseJSON(n),i=!0;Object.keys(t).length>0?$.trim(t.tmp)==""?$(".ClosePopup").trigger("click"):(i=!1,setTimeout(function(){swal({title:"Save",text:t.tmp.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})},500)):console.log("Couldn't Save Your Record");i&&(AvoidWebServiceRaceCondition=0,isFirstLoad=!0,t.url!==undefined?location.href=t.url:LoadItems());console.log("Save Item API End Time: "+GetTime())}function r(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}if(AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;console.log("Save Item API Start Time: "+GetTime());$(".preloader").fadeIn();var t=sAppPath+"WebServices/SaveItems.ashx",n=new FormData;n.append("SearchTable",$(".MainPageTitle").attr("data-id"));n.append("MyID",$(".MyRecordID").val());n.append("DetailsCount",$(".RecordsContainer_Inside:visible").length);$(".InputPortalLogo").length>0&&n.append("LogoFile",$(".InputPortalLogo").get(0).files[0]);$(".MainPageTitle").attr("data-id")!="ChangePassword"?$(".MyFields").each(function(){var t=$(this).val();$(".RecordHeader").find(".Input"+t).is("input")?$(".RecordHeader").find(".Input"+t).attr("type")=="text"||$(".RecordHeader").find(".Input"+t).attr("type")=="password"?n.append("Field_"+t,$(".RecordHeader").find(".Input"+t).val()):$(".RecordHeader").find(".Input"+t).attr("type")=="checkbox"&&n.append("Field_"+t,$(".RecordHeader").find(".Input"+t).prop("checked")):$(".RecordHeader").find(".Input"+t).is("select")&&n.append("Field_"+t,$(".RecordHeader").find(".Input"+t).val())}):(n.append("Field_OriginalPassword",$(".NewHeaderRecord").find(".InputOriginalPassword").val()),n.append("Field_NewPassword",$(".NewHeaderRecord").find(".InputNewPassword").val()),n.append("Field_ConfirmPassword",$(".NewHeaderRecord").find(".InputConfirmPassword").val()));$(".MyDetailsFields").each(function(){var t=$(this).val(),i="";$(".RecordsContainer_Inside:visible").each(function(n){i+=n==0?$(this).find(".InputDetails"+t).val():"~~~"+$(this).find(".InputDetails"+t).val()});$(".RecordsContainer_Inside:visible").find(".InputDetails"+t).is("input")?$(".RecordsContainer_Inside:visible").find(".InputDetails"+t).attr("type")=="text"&&n.append("DetailsField_"+t,i):$(".RecordsContainer_Inside:visible").find(".InputDetails"+t).is("select")&&n.append("DetailsField_"+t,i)});$.ajax({type:"POST",contentType:!1,processData:!1,data:n,url:t+"/SaveItem",success:i,error:r})}}function SaveItemsNew(){function i(n){var t=jQuery.parseJSON(n),i=!0;Object.keys(t).length>0?$.trim(t.tmp)!=""&&(i=!1,setTimeout(function(){swal({title:"Save",text:t.tmp.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})},500)):console.log("Couldn't Save Your Record");i&&(AvoidWebServiceRaceCondition=0,$(".dropzone").length>0&&(myDropzone.options.parallelUploads=$(".dz-preview").length,myDropzone.options.params={Facility:t.Facility,Key:t.key,SearchTable:$(".MainPageTitle").attr("data-id"),ActivityType:"upload"},myDropzone.processQueue()),$(".HeaderGridView").mCustomScrollbar("scrollTo","first"),$(".HeaderGridView").mCustomScrollbar("update"),$(".MyRecordID").val()==0?DisplayItemNew(t.serialkey,t.queryurl):$(".DetailsGridView:visible").length==0&&$(".MyDetailRecordID").length>0?SaveItemsDetails(t.serialkey,t.queryurl):DisplayItemNew(t.serialkey,t.queryurl));console.log("Save Item New API End Time: "+GetTime())}function r(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}if(AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;console.log("Save Item New API Start Time: "+GetTime());$(".preloader").fadeIn();var t=sAppPath+"WebServices/SaveItemsNew.ashx",n=new FormData;n.append("SearchTable",$(".MainPageTitle").attr("data-id"));n.append("MyID",$(".MyRecordID").val());$(".MyFields").each(function(){var i=$(this).val(),t=$(".FloatRecordNew").find(".Input"+i),r=t.val();t.is("input")?t.attr("type")=="text"&&n.append("Field_"+i,r):t.is("select")&&n.append("Field_"+i,r)});$(".MyDetailsFields").each(function(){var i=$(this).val(),t=$(".Details_FloatRecordNew").find(".InputDetails"+i),r=t.val();t.is("input")?t.attr("type")=="text"&&n.append("DetailsField_"+i,r):t.is("select")&&n.append("DetailsField_"+i,r)});$.ajax({type:"POST",contentType:!1,processData:!1,data:n,url:t+"/SaveItem",success:i,error:r})}}function SaveItemsDetails(n,t){function u(i){var r=jQuery.parseJSON(i),u=!0;Object.keys(r).length>0?$.trim(r.tmp)!=""&&(u=!1,setTimeout(function(){swal({title:"Save",text:r.tmp.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})},500)):console.log("Couldn't Save Your Record");u&&(AvoidWebServiceRaceCondition=0,$(".BackDetail").trigger("click"),$(".DetailsGridView").mCustomScrollbar("scrollTo","first"),$(".DetailsGridView").mCustomScrollbar("update"),DisplayItemNew(n,t),$(".NewHeaderRecord").find(".InputStatus").val(r.Status));console.log("Save Item Details API End Time: "+GetTime())}function f(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}if(AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;console.log("Save Item Details API Start Time: "+GetTime());$(".preloader").fadeIn();var r=sAppPath+"WebServices/SaveItemsDetails.ashx",i=new FormData;i.append("SearchTable",$(".MainPageTitle").attr("data-id"));i.append("MyID",$(".MyDetailRecordID").val());$(".MyFields").each(function(){var t=$(this).val(),n=$(".FloatRecordNew").find(".Input"+t),r=n.val();n.is("input")?n.attr("type")=="text"&&i.append("Field_"+t,r):n.is("select")&&i.append("Field_"+t,r)});$(".MyDetailsFields").each(function(){var t=$(this).val(),n=$(".Details_FloatRecordNew").find(".InputDetails"+t),r=n.val();n.is("input")?n.attr("type")=="text"&&i.append("DetailsField_"+t,r):n.is("select")&&i.append("DetailsField_"+t,r)});$.ajax({type:"POST",contentType:!1,processData:!1,data:i,url:r+"/SaveItem",success:u,error:f})}}function DisplayItem(n,t){function f(r){var u=jQuery.parseJSON(r),l,f,a,e,v,o,y,s,h,c,p;if(Object.keys(u).length>0)if($.trim(u.Error)==""){if(l=u.SavedFields,f=l.split(";;;"),$.each(f,function(n){var i="",t="",r=f[n].split(":::"),u;r.length>0&&(t=$(".RecordHeader").find(".Input"+$.trim(r[0])));r.length>1&&(i=r[1]);t.is("input")?t.attr("type")=="text"?t.val(i):t.attr("type")=="file"?i!=""&&$(".PortalLogo").attr("src",sAppPath+"DynamicImages/LogosImages/"+i):$(t).attr("type")=="checkbox"?t.prop("checked",i):$(t).attr("type")=="password"&&(t.attr("type","text"),t.attr("value",i),setTimeout(function(){t.attr("type","password")},100)):t.is("select")&&(($(".MainPageTitle").attr("data-id")=="Warehouse_PO"||$(".MainPageTitle").attr("data-id")=="Warehouse_ASN"||$(".MainPageTitle").attr("data-id")=="Warehouse_SO"||$(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement"||$(".MainPageTitle").attr("data-id")=="SKUCATALOGUE")&&t.hasClass("InputAutoPostBack")&&(AutoPostBack(i.split(",")),AvoidWebServiceRaceCondition=1),t.val(i.split(",")).trigger("chosen:updated"),u=setInterval(function(){if(!IsAutoPostBack){var n=i.split(",");$.each(n,function(i){t.find("option[value='"+n[i]+"']").length==0&&t.append("<option value='"+n[i]+"'>"+n[i]+"<\/option>")});t.val(i.split(",")).trigger("chosen:updated");clearInterval(u)}},100))}),u.ReadOnlyFields!=""&&(a=u.ReadOnlyFields,e=a.split("~~~"),$.each(e,function(n){var t="",i=e[n];i.length>0&&(t=$(".RecordHeader").find(".Input"+$.trim(i)));t.is("input")?t.prop("disabled",!0):t.is("select")&&t.prop("disabled",!0).trigger("chosen:updated")})),$(".jscolor").length>0&&$(".jscolor").each(function(){$(this).css({"background-color":$(this).val()})}),$(".AddDetailsBtn").hide(),$(".ErrorIcon").remove(),$(".MyRecordID").val(n),$(".FloatRecordField").find("input:password").val(""),$(".New_Modify_Record_PopUp").fadeIn(function(){SetMasterResize();$(".AddDetailsBtn").show();$(".FloatRecordField").find("input:password").removeClass("Error");$(".btnDeleteDtl").click(function(){var n=$(this);n.parent(".RecordsContainer_Inside").remove();setOnCufex_Resize()})}),u.DetailsCount>0){for(setTimeout(function(){var i=$(".RecordsContainer_Inside").find(".InputDetailsSku"),t=$(".RecordHeader").find(".InputFacility").val().toString(),n;t=t.substring(t.lastIndexOf(",")+1);n=$(".RecordHeader").find(".InputStorerKey").val().toString();n=n.substring(n.lastIndexOf(",")+1);GetSkuDropDown(i,t,n,"")},2e3),i=0;i<u.DetailsCount;i++)$(".RecordsContainer_Inside").eq(0).clone().prependTo(".RecordsContainer").show(),setOnCufex_Resize(),$(".RecordsContainer_Inside").eq(0).find(".chosen-container").remove(),$(".RecordsContainer_Inside").eq(0).find(".chosen-select").chosen(),$(".RecordsContainer_Inside").eq(0).find(".chosen-container").css("width","100%"),$(".RecordsContainer_Inside").eq(0).find(".chosen-select").trigger("chosen:updated"),$(".RecordsContainer_Inside").eq(0).find(".datepicker").removeClass("hasDatepicker"),$(".RecordsContainer_Inside").eq(0).find(".datepicker").datepicker();if($(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement")$(".InputStorerKey, .InputConsigneeKey, .InputDetailsSku").on("change",function(){$(".RecordsContainer_Inside:visible").length>0&&SetPriceAndCurrency()});v=u.SavedDetailsFields;o=v.split(";;;");$.each(o,function(n){var i="",t="",r=o[n].split(":::");r.length>0&&(t=$(".RecordsContainer_Inside:visible").find(".InputDetails"+$.trim(r[0])));r.length>1&&(i=r[1].split("~~~"));$(".RecordsContainer_Inside:visible").each(function(n){var u,r;i[n]!=null&&(t.eq(n).is("input")?t.eq(n).attr("type")=="text"?t.eq(n).val(i[n]):t.eq(n).attr("type")=="checkbox"&&t.eq(n).prop("checked",i[n]):t.eq(n).is("select")&&($(".MainPageTitle").attr("data-id")=="Warehouse_PO"||$(".MainPageTitle").attr("data-id")=="Warehouse_ASN"||$(".MainPageTitle").attr("data-id")=="Warehouse_SO"||$(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement"?(t.eq(n).hasClass("InputAutoPostBackDetails")&&(AutoPostBackDetails($(".RecordsContainer_Inside").eq(n),i[n].split(",")),AvoidWebServiceRaceCondition=1),t.eq(n).val(i[n].split(",")).trigger("chosen:updated"),u=setInterval(function(){if(!IsAutoPostBackDetails){var r=i[n].split(",");$.each(r,function(i){t.eq(n).find("option[value='"+r[i]+"']").length==0&&t.eq(n).append("<option value='"+r[i]+"'>"+r[i]+"<\/option>")});t.eq(n).val(i[n].split(",")).trigger("chosen:updated");clearInterval(u)}},3e3)):(r=i[n].split(","),$.each(r,function(i){t.eq(n).find("option[value='"+r[i]+"']").length==0&&t.eq(n).append("<option value='"+r[i]+"'>"+r[i]+"<\/option>")}),t.eq(n).val(i[n].split(",")).trigger("chosen:updated"))))})});u.ReadOnlyDetailsFields!=""&&(y=u.ReadOnlyDetailsFields,s=y.split("~~~"),$(".RecordsContainer_Inside:visible").each(function(n){$.each(s,function(t){var i="",r=s[t];r.length>0&&(i=$(".RecordsContainer_Inside:visible").find(".InputDetails"+$.trim(r)));i.eq(n).is("input")?i.eq(n).prop("disabled",!0):i.eq(n).is("select")&&i.eq(n).prop("disabled",!0).trigger("chosen:updated")})}));h=u.InputDetailsFields;h!=""&&(c=h.split(";;;"),$.each(c,function(n){var i="",r="",t=c[n].split(":::");t.length>0&&(r=$(".RecordsContainer_Inside:visible").find(".InputDetails"+$.trim(t[0])));t.length>1&&(i=t[1].split("~~~"));$(".RecordsContainer_Inside:visible").each(function(n){r.eq(n).parents(".Details_FloatRecordField").siblings(".Details_FloatRecordTitle").html(i[n])})}))}t!=""&&(p=$(".HiddenDetailLink").val(),window.history.pushState("object or string",n,p+t))}else showPreloader=!1,setTimeout(function(){swal({title:"View",text:u.Error.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})},500);else console.log("This record does not exist");!0&&$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0});console.log("Display Item API End Time: "+GetTime())}function e(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}if(AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;console.log("Display Item API Start Time: "+GetTime());$(".preloader").fadeIn();var u=sAppPath+"WebServices/DisplayItems.ashx",r=new FormData;r.append("SearchTable",$(".MainPageTitle").attr("data-id"));r.append("MyID",n);$.ajax({type:"POST",contentType:!1,processData:!1,data:r,url:u+"/DisplayItem",success:f,error:e})}}function DisplayItemNew(n,t){function u(i){var r=jQuery.parseJSON(i),o=!0,s,u,h,f,e,c;Object.keys(r).length>0?$.trim(r.Error)==""?($(".CarrierEventsBtn").hide(),$(".btnAddNew").trigger("click"),s=r.SavedFields,u=s.split(";;;"),$.each(u,function(n){var i="",t="",r=u[n].split(":::"),f;r.length>0&&(t=$(".NewHeaderRecord").find(".Input"+r[0].trim()));r.length>1&&(i=r[1]);t.is("input")?t.attr("type")=="text"&&t.val(i):t.is("select")&&(($(".MainPageTitle").attr("data-id")=="Warehouse_PO"||$(".MainPageTitle").attr("data-id")=="Warehouse_ASN"||$(".MainPageTitle").attr("data-id")=="Warehouse_SO"||$(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement"||$(".MainPageTitle").attr("data-id")=="SKUCATALOGUE")&&t.hasClass("InputAutoPostBack")&&(AutoPostBack(i.split(",")),AvoidWebServiceRaceCondition=1),t.val(i.split(",")).trigger("chosen:updated"),f=setInterval(function(){if(!IsAutoPostBack){var n=i.split(",");$.each(n,function(i){t.find("option[value='"+n[i]+"']").length==0&&t.append("<option value='"+n[i]+"'>"+n[i]+"<\/option>")});t.val(i.split(",")).trigger("chosen:updated");clearInterval(f)}},100))}),r.ReadOnlyFields!=""&&(h=r.ReadOnlyFields,f=h.split("~~~"),$.each(f,function(n){var t="",i=f[n];i.length>0&&(t=$(".NewHeaderRecord").find(".Input"+i.trim()));t.is("input:text")?t.prop("disabled",!0):t.is("select")&&t.prop("disabled",!0).trigger("chosen:updated")})),r.SavedFiles!=""&&($(".dropzone").length>0&&$(".dz-preview").remove(),e=r.SavedFiles.split(";;;"),$.each(e,function(n){var o="",i="",r="",s=!1,h=!0,u=e[n].split(":::"),f,t;u.length>0&&(i=u[0].trim(),r=i.substring(i.toLowerCase().lastIndexOf(".")+1),s=r=="png"||r=="tiff"||r=="jpg"||r=="jpeg"||r=="gif");u.length>1&&(o=u[1]);u.length>2&&(h=u[2]=="0"?!0:!1);f={name:i,size:o};myDropzone.options.addedfile.call(myDropzone,f);s&&myDropzone.options.thumbnail.call(myDropzone,f,sAppPath+"DynamicFiles/FileManagement/"+i);myDropzone.emit("complete",f);t=document.createElement("a");t.setAttribute("href",sAppPath+"DynamicFiles/FileManagement/"+i);t.setAttribute("class","dz-remove download");t.setAttribute("data-filename",i);t.setAttribute("data-filesize",o);s&&t.setAttribute("target","_blank");t.innerHTML="View file";$(".dz-preview").eq(n).find(".dz-remove").after(t);$(".dz-default").hide();$(".HiddenCanViewOwnFiles").val()==0&&$(".HiddenCanViewAllFiles").val()==0?$(".dz-preview").eq(n).find(".dz-remove download").hide():$(".HiddenCanViewOwnFiles").val()==1&&$(".HiddenCanViewAllFiles").val()==0&&(h||$(".dz-preview").eq(n).find(".dz-remove download").hide());$(".HiddenCanRemoveOwnFiles").val()==0&&$(".HiddenCanRemoveAllFiles").val()==0?$(".dz-preview").eq(n).find(".dz-remove").hide():$(".HiddenCanRemoveOwnFiles").val()==1&&$(".HiddenCanRemoveAllFiles").val()==0&&(h||$(".dz-preview").eq(n).find(".dz-remove").hide())}),$(".dz-remove.download").click(function(){UploadedFileAction($(this).attr("data-filename"),$(this).attr("data-filesize"),"view")})),$(".MyRecordID").val(n),$(".ActionsDetails,.DetailsGridView").show(),$(".NewDetailRecord").hide(),$(".MainPageTitle").attr("data-id")=="Warehouse_OrderTracking"&&(setTimeout(function(){$(".CarrierEventsBtn").show()},300),r.CarrierEventsNbr==0?($(".CarrierEventsBtn").addClass("Inactive"),$(".CarrierEventsNbrCircle").hide()):($(".CarrierEventsBtn").removeClass("Inactive"),$(".CarrierEventsNbrCircle").show(),$(".CarrierEventsNbr").html(r.CarrierEventsNbr),$(".CarriersDivRecords").html(r.CarrierRecords),$(".CarriersDiv").height($(".CarrierEventsMenuContainer").height()-$(".CarrierEventsHeader").outerHeight()-30),$(".CarrierDiv").unbind("click").bind("click",function(){if(!$(this).hasClass("Active")){$(".CarrierDiv").removeClass("Active");$(this).addClass("Active");var n=$(".CarrierDiv").eq(0).outerHeight(),t=$(this).index();$(".CarrierIndicator").animate({top:(n+20)*t,height:$(this).outerHeight()},300);$(".CarrierEventsMenu").css({left:$(window).width()-$(".CarriersDiv").width()-$(".CarrierEventInfo").outerWidth()});$(".CarrierEventInfo").hide();setTimeout(function(){$(".CarrierEventInfo").fadeIn();SetMasterResize();$(".ArticlesDiv").height($(".CarrierEventsMenuContainer").height()-$(".CarrierEventInfo1").outerHeight()-30)},300);$(".CarrierEventDescription").html("<div class='EventDescriptionBullet Category"+$(this).data("category")+"'><\/div>"+$(this).data("eventdescription"));$(".CarrierEventDescription").addClass("Category"+$(this).data("category"));$(".CarrierEventDate").html($(this).data("eventdate"));$(".CarrierConsignmentDate").html("Created on: <span>"+$(this).data("consignmentdate")+"<\/span>");$(".CarrierItems").html("Items: <span>"+$(this).data("items")+"<\/span>");$(".CarrierCube").html("Cube: <span>"+$(this).data("cube")+"<\/span>");$(".CarrierWeight").html("Weight: <span>"+$(this).data("weight")+"<\/span>");GetCarrierDetails("Articles")}}))),t!=""&&(c=$(".HiddenDetailLink").val(),window.history.pushState("object or string",n,c+t))):(o=!1,setTimeout(function(){swal({title:"View",text:r.Error.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})},500)):console.log("This record does not exist");o&&($(".DetailsGridView").length>0?(AvoidWebServiceRaceCondition=0,setTimeout(function(){isFirstLoad=!0;GetUserConfiguration();LoadItemsDetails();$(".DetailsGridView").find(".chkSelectAll").prop("checked",!1)},500)):$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0}));console.log("Display Item New API End Time: "+GetTime())}function f(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}if(AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;console.log("Display Item New API Start Time: "+GetTime());$(".preloader").fadeIn();$("html, body").animate({scrollTop:0},"slow","easeInOutCubic");var r=sAppPath+"WebServices/DisplayItemsNew.ashx",i=new FormData;i.append("SearchTable",$(".MainPageTitle").attr("data-id"));i.append("MyID",n);$.ajax({type:"POST",contentType:!1,processData:!1,data:i,url:r+"/DisplayItem",success:u,error:f})}}function DisplayItemDetails(n){function r(t){var i=jQuery.parseJSON(t),f=!0,e,r,o,u;Object.keys(i).length>0?$.trim(i.Error)==""?($(".btnNew").trigger("click"),e=i.SavedDetailsFields,r=e.split(";;;"),$.each(r,function(n){var i="",t="",u=r[n].split(":::"),f;u.length>0&&(t=$(".NewDetailRecord").find(".InputDetails"+u[0].trim()));u.length>1&&(i=u[1]);t.is("input")?t.attr("type")=="text"&&t.val(i):t.is("select")&&(($(".MainPageTitle").attr("data-id")=="Warehouse_PO"||$(".MainPageTitle").attr("data-id")=="Warehouse_ASN"||$(".MainPageTitle").attr("data-id")=="Warehouse_SO"||$(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement")&&t.hasClass("InputAutoPostBackDetails")&&(AutoPostBackDetails($(".NewDetailRecord"),i.split(",")),AvoidWebServiceRaceCondition=1),t.val(i.split(",")).trigger("chosen:updated"),f=setInterval(function(){if(!IsAutoPostBackDetails){var n=i.split(",");$.each(n,function(i){t.find("option[value='"+n[i]+"']").length==0&&t.append("<option value='"+n[i]+"'>"+n[i]+"<\/option>")});t.val(i.split(",")).trigger("chosen:updated");clearInterval(f)}},100))}),o=i.ReadOnlyDetailsFields,u=o.split("~~~"),$.each(u,function(n){var t="",i=u[n];i.length>0&&(t=$(".NewDetailRecord").find(".InputDetails"+i.trim()));t.is("input")?t.prop("disabled",!0):t.is("select")&&t.prop("disabled",!0).trigger("chosen:updated")}),$(".MyDetailRecordID").val(n),$(".MainPageDetailTitle").html("Edit Record")):(f=!1,setTimeout(function(){swal({title:"View",text:i.Error.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})},500)):console.log("This record does not exist");f&&$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0});console.log("Display Item Details New API End Time: "+GetTime())}function u(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}if(AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;console.log("Display Item Details New API Start Time: "+GetTime());$(".preloader").fadeIn();var i=sAppPath+"WebServices/DisplayItemsDetails.ashx",t=new FormData;t.append("SearchTable",$(".MainPageTitle").attr("data-id"));t.append("MyID",n);t.append("Facility",$(".NewHeaderRecord").find(".InputFacility").val());$.ajax({type:"POST",contentType:!1,processData:!1,data:t,url:i+"/DisplayItem",success:r,error:u})}}function LoadItems(){var r,n,i,t;if($(".MainPageTitle").attr("data-id")!="ChangePassword"){AvoidWebServiceRaceCondition==0&&(AvoidWebServiceRaceCondition=1,$(".HeaderGridView").find(".GridResults").remove(),$(".HeaderGridView").find(".NoResults").hide(),isFirstLoad||$(".preloader").fadeIn(),isFirstLoad=!1,r=sAppPath+"WebServices/GetItems.ashx",n="",$(".MyTab").length>0&&(n=$(".MyTab.Active").data("id")),i=$(".QueryUrlStr").val(),t=new FormData,t.append("SearchQuery",SearchQuery),t.append("SearchTable",$(".MainPageTitle").attr("data-id")),t.append("SortBy",SortBy),t.append("QueryUrlStr",i),t.append("TabName",n),$.ajax({type:"POST",contentType:!1,processData:!1,data:t,url:r+"/GetMore",success:u,error:f}));function u(t){var r=jQuery.parseJSON(t),u;if(Object.keys(r).length>0)if($(".HeaderGridView").find(".PagingNumbers").html("0 of 0"),$.trim(r.Records)!==""){n=="Actions"?$(".GridActions").find(".SearchStyle").after(r.Records):n=="Reports"?$(".GridReports").find(".SearchStyle").after(r.Records):n=="Dashboards"?$(".GridDashboards").find(".SearchStyle").after(r.Records):$(".HeaderGridView").find(".SearchStyle").after(r.Records);SetUITemplate();n==""?($(".HeaderGridView").find(".GridResults").each(function(){var n=$(this);n.children(".GridCell[data-id]").each(function(n){var t=$(this);t.attr("data-priority",$(".MyFields[data-priority]").eq(n).attr("data-priority"));t.attr("data-hidden",$(".MyFields[data-hidden]").eq(n).attr("data-hidden"))})}),ShowHideColumns($(".HeaderGridView").find(".GridResults")),ChangeColumnsOrder($(".HeaderGridView").find(".GridResults")),PageTable("HeaderGridView"),MaxPages=Math.ceil($(".HeaderGridView").find(".GridResults").size()/NumberOfRecordsInPage)):(PageTableTab("Grid"+n),MaxPages=Math.ceil($(".Grid"+n).find(".GridResults").size()/NumberOfRecordsInPage));$(".Arrow-Left-Back-First").trigger("click");setTimeout(function(){InitColResizable()},300);MaxPages==1||CurrentPage==MaxPages-1?($(".HeaderGridView").find(".Arrow-Right-Forward").addClass("Disabled"),$(".HeaderGridView").find(".Arrow-Right-Forward-Last").addClass("Disabled")):($(".HeaderGridView").find(".Arrow-Right-Forward").removeClass("Disabled"),$(".HeaderGridView").find(".Arrow-Right-Forward-Last").removeClass("Disabled"));$(".HeaderGridView").find(".GridContainer").on("click",".editStyleNew",function(){var t=$(this).attr("data-id"),n=$(this).attr("data-queryurl");$(".NewRecord").length>0&&(n="");DisplayItem(t,n)});$(".HeaderGridView").find(".GridContainer").on("click",".editStyle",function(){if($(".MainPageTitle").attr("data-id")!="PROFILES"){var n=$(this).attr("data-id"),t=$(this).attr("data-queryurl");DisplayItemNew(n,t)}});n!=""&&(u="",$(".chkSelectGrdEdit").change(function(){u=$.trim($(this).closest(".GridResults").find(".Initial").html());UpdateProfileDetail($(this),"Edit",i,n,u)}),$(".chkSelectGrdReadOnly").change(function(){u=$.trim($(this).closest(".GridResults").find(".Initial").html());UpdateProfileDetail($(this),"Read Only",i,n,u)}));$(".MainPageTitle").attr("data-id")=="PORTALUSERS"&&$(".chkSelectGrdActive").change(function(){UpdateUserActive($(this))})}else $(".HeaderGridView").find(".NoResults").show();else $(".HeaderGridView").find(".NoResults").show();$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0;SetMasterResize()})}function f(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}}}function LoadItemsDetails(){function u(n){var t=jQuery.parseJSON(n);if(Object.keys(t).length>0)if($(".DetailsGridView").find(".PagingNumbers").html("0 of 0"),$.trim(t.Records)!==""){$(".DetailsGridView").find(".SearchStyle").after(t.Records);SetUITemplate();$(".DetailsGridView").find(".GridResults").each(function(){var n=$(this);n.children(".GridCell[data-id]").each(function(n){var t=$(this);t.attr("data-priority",$(".MyDetailsFields[data-priority]").eq(n).attr("data-priority"));t.attr("data-hidden",$(".MyDetailsFields[data-hidden]").eq(n).attr("data-hidden"))})});ShowHideColumns($(".DetailsGridView").find(".GridResults"));ChangeColumnsOrder($(".DetailsGridView").find(".GridResults"));setTimeout(function(){InitColResizable()},300);PageTable("DetailsGridView");MaxPagesDetails=Math.ceil($(".DetailsGridView").find(".GridResults").size()/NumberOfRecordsInPage);$(".Arrow-Left-Back-First").trigger("click");MaxPagesDetails==1||CurrentPageDetails==MaxPagesDetails-1?($(".DetailsGridView").find(".Arrow-Right-Forward").addClass("Disabled"),$(".DetailsGridView").find(".Arrow-Right-Forward-Last").addClass("Disabled")):($(".DetailsGridView").find(".Arrow-Right-Forward").removeClass("Disabled"),$(".DetailsGridView").find(".Arrow-Right-Forward-Last").removeClass("Disabled"));$(".DetailsGridView").find(".GridContainer").on("click",".editStyle",function(){var n=$(this).attr("data-id");DisplayItemDetails(n)})}else $(".DetailsGridView").find(".NoResults").show();else $(".DetailsGridView").find(".NoResults").show();$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0;setOnCufex_Resize()})}function f(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}var i,n,t,r;AvoidWebServiceRaceCondition=0;AvoidWebServiceRaceCondition==0&&(AvoidWebServiceRaceCondition=1,$(".DetailsGridView").find(".GridResults").remove(),$(".DetailsGridView").find(".NoResults").hide(),isFirstLoad||$(".preloader").fadeIn(),isFirstLoad=!1,i=sAppPath+"WebServices/GetItemsDetails.ashx",n=new FormData,n.append("SearchQuery",SearchQueryDetails),n.append("SearchTable",$(".MainPageTitle").attr("data-id")),n.append("Facility",$(".NewHeaderRecord").find(".InputFacility").val()),$(".MainPageTitle").attr("data-id")=="Warehouse_PO"?t=$(".NewHeaderRecord").find(".InputPOKey").val():$(".MainPageTitle").attr("data-id")=="Warehouse_ASN"?t=$(".NewHeaderRecord").find(".InputReceiptKey").val():$(".MainPageTitle").attr("data-id")=="Warehouse_SO"?t=$(".NewHeaderRecord").find(".InputOrderKey").val():$(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement"?t=$(".NewHeaderRecord").find(".InputOrderManagKey").val():$(".MainPageTitle").attr("data-id")=="Warehouse_OrderTracking"&&(t=$(".NewHeaderRecord").find(".InputExternOrderKey").val(),r=$(".NewHeaderRecord").find(".InputStorerKey").val()),n.append("Key",t),n.append("StorerKey",r),n.append("SortBy",SortByDetails),$.ajax({type:"POST",contentType:!1,processData:!1,data:n,url:i+"/GetMore",success:u,error:f}))}function LoadItemsPopup(){function r(n){var t=jQuery.parseJSON(n);if(Object.keys(t).length>0)if($(".HeaderGridView").find(".PagingNumbers").html("0 of 0"),$.trim(t.Records)!==""){$(".HeaderGridView").find(".SearchStyle").after(t.Records);SetUITemplate();PageTable("HeaderGridView");MaxPages=Math.ceil($(".HeaderGridView").find(".GridResults").size()/NumberOfRecordsInPage);$(".Arrow-Left-Back-First").trigger("click");MaxPages==1||CurrentPage==MaxPages-1?($(".HeaderGridView").find(".Arrow-Right-Forward").addClass("Disabled"),$(".HeaderGridView").find(".Arrow-Right-Forward-Last").addClass("Disabled")):($(".HeaderGridView").find(".Arrow-Right-Forward").removeClass("Disabled"),$(".HeaderGridView").find(".Arrow-Right-Forward-Last").removeClass("Disabled"));$(".HeaderGridView").find(".GridContainer").on("click",".selectStyle",function(){var i;if(window.opener!=null&&!window.opener.closed){var t=$.trim($(this).parent("td").siblings("td[data-id=1]").html().replace("<span>","").replace("<span","")),f=$.trim($(this).parent("td").siblings("td[data-id=2]").html().replace("<span>","").replace("<span","")),r="",u="",e=window.opener.$(".SearchDropDown.Active"),n=e.siblings(window.opener.$(".chosen-select"));n.attr("class").indexOf("InputDetailsSku")>=0&&(r=$.trim($(this).parent("td").siblings("td[data-id=3]").html().replace("<span>","").replace("<span","")),u=$.trim($(this).parent("td").siblings("td[data-id=4]").html().replace("<span>","").replace("<span","")));i="";n.find("option[value='"+t+"']").length==0&&(n.find("option[data-value1]").length>0&&(i="data-value1='"+f+"'"),n.attr("class").indexOf("InputDetailsSku")>=0&&(i+=" data-pack='"+r+"' data-packdescr='"+u+"'"),n.append("<option value='"+t+"'"+i+">"+t+"<\/option>"),n.siblings(".chosen-container").find("option").remove());n.val(t).trigger("chosen:updated");window.opener.$(".NewRecord:visible").length>0?window.opener.$(".NewRecord").find(".InputDetailsSku").trigger("change"):window.opener.$(".RecordsContainer_Inside:visible").find(".InputDetailsSku").trigger("change")}window.close()})}else $(".HeaderGridView").find(".NoResults").show();else $(".HeaderGridView").find(".NoResults").show();$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0;SetMasterResize()})}function u(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}if(AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;$(".HeaderGridView").find(".GridResults").remove();$(".HeaderGridView").find(".NoResults").hide();isFirstLoad||$(".preloader").fadeIn();isFirstLoad=!1;var t=sAppPath+"WebServices/GetItemsPopup.ashx",i=$(".QueryUrlStr").val(),n=new FormData;n.append("SearchQuery",SearchQuery);n.append("SearchTable",$(".MainPageTitle").attr("data-id"));n.append("SortBy",SortBy);n.append("QueryUrlStr",i);$.ajax({type:"POST",contentType:!1,processData:!1,data:n,url:t+"/GetMore",success:r,error:u})}}function DisplayDropDowns(){function i(n){var t=jQuery.parseJSON(n),r,i;Object.keys(t).length>0?$.trim(t.DropDownFields)!=""&&(r=t.DropDownFields,i=r.split(";;;"),$.each(i,function(n){var u="",t="",r=i[n].split(":::"),f;if(r.length>0&&(t=".Input"+$.trim(r[0])),r.length>1&&(u=r[1]),$(t).is("select")){if($(t).empty(),$.trim(u)!=="")for(f=u.split(","),n=0;n<f.length;n++){var s="",e="",o=f[n].split("~~~");for(j=0;j<o.length;j++)j==0?e=o[j]:s+=" data-value"+j+"='"+o[j]+"'";$(t).append("<option value='"+e+"'"+s+">"+e+"<\/option>")}$(t).trigger("chosen:updated");SearchDropDown(".Input"+$.trim(r[0]))}})):console.log("Couldn't Display Drop Downs");AvoidWebServiceRaceCondition=0}function r(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}if(AvoidWebServiceRaceCondition=0,AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;var t=sAppPath+"WebServices/DisplayDropDowns.ashx",n=new FormData;n.append("SearchTable",$(".MainPageTitle").attr("data-id"));$.ajax({type:"POST",contentType:!1,processData:!1,data:n,url:t+"/DisplayDropDown",success:i,error:r})}}function AutoPostBack(n){function r(n){var t=jQuery.parseJSON(n),r=!0,f,i;if(Object.keys(t).length>0)if(t.DropDownFields.indexOf("Error")>=0)r=!1,setTimeout(function(){swal({title:"Load Items",text:t.DropDownFields,type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0;IsAutoPostBack=!1})},500);else{var e=t.DropDownFields,u=e.split(";;;"),o=$(".HeaderGridView:visible").length>0?$(".RecordHeader"):$(".NewHeaderRecord");$.each(u,function(n){var r="",t="",i=u[n].split(":::"),f;if(i.length>0&&(t=o.find(".Input"+$.trim(i[0]))),i.length>1&&(r=i[1]),t.is("select")){if(t.empty(),$.trim(r)!=="")for(f=r.split(","),n=0;n<f.length;n++){var h="",e="",s=f[n].split("~~~");for(j=0;j<s.length;j++)j==0?e=s[j]:h+=" data-value"+j+"='"+s[j]+"'";t.append("<option value='"+e+"'"+h+">"+e+"<\/option>")}t.trigger("chosen:updated");SearchDropDown(".Input"+$.trim(i[0]))}});f=t.DropDownDetailsFields;i=f.split(";;;");$.each(i,function(n){var u="",t="",r=i[n].split(":::"),f;if(r.length>0&&(t=".InputDetails"+$.trim(r[0])),r.length>1&&(u=r[1]),$(".HeaderGridView:visible").length>0)t=$(".RecordsContainer_Inside").find(t),$(".RecordsContainer_Inside").each(function(i){var f;if(t.eq(i).is("select")){if(t.eq(i).empty(),$.trim(u)!=="")for(f=u.split(","),n=0;n<f.length;n++){var s="",e="",o=f[n].split("~~~");for(j=0;j<o.length;j++)j==0?e=o[j]:s+=" data-value"+j+"='"+o[j]+"'";t.eq(i).append("<option value='"+e+"'"+s+">"+e+"<\/option>")}t.eq(i).trigger("chosen:updated");t.eq(i).attr("class").indexOf("InputDetailsToLoc")>=0&&(t.eq(i).find("option[value='STAGE']").length==0&&t.eq(i).append("<option value='STAGE'>STAGE<\/option>"),t.eq(i).val("STAGE").trigger("chosen:updated"));SearchDropDown(".InputDetails"+$.trim(r[0]))}});else if(t=$(".NewDetailRecord").find(t),t.is("select")){if(t.empty(),$.trim(u)!=="")for(f=u.split(","),n=0;n<f.length;n++){var s="",e="",o=f[n].split("~~~");for(j=0;j<o.length;j++)j==0?e=o[j]:s+=" data-value"+j+"='"+o[j]+"'";t.append("<option value='"+e+"'"+s+">"+e+"<\/option>")}t.trigger("chosen:updated");t.attr("class").indexOf("InputDetailsToLoc")>=0&&(t.find("option[value='STAGE']").length==0&&t.append("<option value='STAGE'>STAGE<\/option>"),t.val("STAGE").trigger("chosen:updated"));SearchDropDown(".InputDetails"+$.trim(r[0]))}})}else console.log("Couldn't Display Drop Downs");r&&setTimeout(function(){$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0;IsAutoPostBack=!1})},500)}function u(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0;IsAutoPostBack=!1})}if(AvoidWebServiceRaceCondition=0,AvoidWebServiceRaceCondition==0){IsAutoPostBack=!0;AvoidWebServiceRaceCondition=1;var i=sAppPath+"WebServices/AutoPostBackDropDowns.ashx",t=new FormData;t.append("SearchTable",$(".MainPageTitle").attr("data-id"));t.append("MyValue",n);$.ajax({type:"POST",contentType:!1,processData:!1,data:t,url:i+"/AutoPostBack",success:r,error:u})}}function AutoPostBackDetails(n,t){function u(t){var r=jQuery.parseJSON(t),u,i;Object.keys(r).length>0?(u=r.DropDownFields,i=u.split(";;;"),$.each(i,function(t){var f="",r="",u=i[t].split(":::"),e;if(u.length>0&&(r=n.find(".InputDetails"+$.trim(u[0]))),u.length>1&&(f=u[1]),$(r).is("select")){if($(r).empty(),$.trim(f)!=="")for(e=f.split(","),t=0;t<e.length;t++){var h="",o="",s=e[t].split("~~~");for(j=0;j<s.length;j++)j==0?o=s[j]:h+=" data-value"+j+"='"+s[j]+"'";$(r).append("<option value='"+o+"'"+h+">"+o+"<\/option>")}$(r).trigger("chosen:updated");SearchDropDown(".InputDetails"+$.trim(u[0]))}})):console.log("Couldn't Display Drop Downs");AvoidWebServiceRaceCondition=0;IsAutoPostBackDetails=!1}function f(n){console.log(n.error);AvoidWebServiceRaceCondition=0;IsAutoPostBackDetails=!1}if(AvoidWebServiceRaceCondition=0,AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;IsAutoPostBackDetails=!0;var r=sAppPath+"WebServices/AutoPostBackDetailsDropDowns.ashx",i=new FormData;i.append("SearchTable",$(".MainPageTitle").attr("data-id"));i.append("MyFacility",$(".InputFacility").val());i.append("MyValue",t);$.ajax({type:"POST",contentType:!1,processData:!1,data:i,url:r+"/AutoPostBack",success:u,error:f})}}function GetSkuDropDown(n,t,i,r){if(n.length>0){if(AvoidWebServiceRaceCondition=0,AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;var f=sAppPath+"WebServices/SearchDropDowns.ashx",u=new FormData;u.append("SearchTable",$(".MainPageTitle").attr("data-id"));u.append("MyFacility",t);u.append("MyOwner",i);$.ajax({type:"POST",contentType:!1,processData:!1,data:u,url:f+"/Search",success:e,error:o})}function e(t){var i=jQuery.parseJSON(t);if(Object.keys(i).length>0){if($.trim(i.DropDownFields)!=""){var f=i.DropDownFields,e=i.DropDownFieldsDefaultValues,u=f.split(";;;");$.each(u,function(t){var o="",i=n,l=u[t].split(":::"),s,f;if(l.length>1&&(o=l[1]),$(i).is("select")&&$(i).val()==""){if($(i).empty(),$.trim(o)!==""){for(s=o.split(","),t=0;t<s.length;t++){var a="",h="",c=s[t].split("~~~");for(j=0;j<c.length;j++)j==0?h=c[j]:a+=" data-value"+j+"='"+c[j]+"'";$(i).append("<option value='"+h+"'"+a+">"+h+"<\/option>")}for(f=e.split(","),t=0;t<f.length;t++)$(i).find("option").eq(t).attr("data-pack",f[t].split("~~~")[0]),$(i).find("option").eq(t).attr("data-packdescr",f[t].split("~~~")[1])}r!=""&&$(i).val(r);$(i).trigger("chosen:updated");SearchDropDown(".InputDetailsSku")}})}}else console.log("Couldn't Load Items");!0&&$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}function o(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}}}function SearchDropDown(n){$(n).each(function(){var n=$(this);n.siblings(".chosen-container").find(".chosen-choices input").autocomplete({source:function(t){$("ul.chosen-results").empty();var i=!1;n.find("option").each(function(r){$(this).val().toLowerCase().startsWith(t.term.toLowerCase())?(i=!0,$("ul.chosen-results").append("<li class='"+(n.val().indexOf($(this).val())>=0?"result-selected":"active-result")+"' data-option-array-index='"+r+"'><em>"+$(this).val().substring(0,t.term.length)+"<\/em>"+$(this).val().substring(t.term.length)+"<\/li>")):($(this).attr("data-value1")!=null&&$(this).attr("data-value1").toLowerCase().startsWith(t.term.toLowerCase())&&(i=!0,$("ul.chosen-results").append("<li class='active-result' data-option-array-index='"+r+"'>"+$(this).val()+"<\/li>")),$(this).attr("data-value2")!=null&&$(this).attr("data-value2").toLowerCase().startsWith(t.term.toLowerCase())&&!i&&(i=!0,$("ul.chosen-results").append("<li class='active-result' data-option-array-index='"+r+"'>"+$(this).val()+"<\/li>")))});i||$("ul.chosen-results").append("<li class='no-results'>No results match "+t.term+"<\/li>")}})})}function SetPriceAndCurrency(){function f(n){var i=jQuery.parseJSON(n),r,t;Object.keys(i).length>0?(r=i.Fields,t=r.split(";;;"),$.each(t,function(n){var u="",i="",r=t[n].split(":::");r.length>0&&(i=".InputDetails"+$.trim(r[0]));r.length>1&&(u=r[1].split("~~~"));$(".HeaderGridView:visible").length>0?(i=$(".RecordsContainer_Inside").find(i),$(".RecordsContainer_Inside").each(function(n){i.eq(n).val(u[n])})):(i=$(".NewDetailRecord").find(i),i.val(u[0]))})):console.log("Couldn't Set Price and Currency");AvoidWebServiceRaceCondition=0}function e(n){console.log(n.error);AvoidWebServiceRaceCondition=0}var u,n;if(AvoidWebServiceRaceCondition=0,AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;var t="",i="",r="";$(".RecordsContainer_Inside:visible").length>0?(i=$(".RecordHeader").find(".InputStorerKey").val(),r=$(".RecordHeader").find(".InputConsigneeKey").val(),$(".RecordsContainer_Inside:visible").find(".InputDetailsSku").each(function(n){t+=(n>0?",":"")+"'"+$(this).val()+"'"})):(i=$(".NewHeaderRecord").find(".InputStorerKey").val(),r=$(".NewHeaderRecord").find(".InputConsigneeKey").val(),t="'"+$(".NewDetailRecord").find(".InputDetailsSku").val()+"'");u=sAppPath+"WebServices/FetchPriceCurrency.ashx";n=new FormData;n.append("SearchTable",$(".MainPageTitle").attr("data-id"));n.append("MyOwner",i);n.append("MyConsignee",r);n.append("MyItems",t);$.ajax({type:"POST",contentType:!1,processData:!1,data:n,url:u+"/FetchData",success:f,error:e})}}function ExecuteAction(n,t){function u(n){var t=jQuery.parseJSON(n),i=!0;Object.keys(t).length>0?$.trim(t.Result)!==""&&(i=!1,setTimeout(function(){swal({title:"Action",text:t.Result.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})},500)):console.log("Couldn't Execute Action");i&&(AvoidWebServiceRaceCondition=0,$(".NewRecord:visible").length>0?DisplayItemNew($(".MyRecordID").val(),""):(isFirstLoad=!0,LoadItems()))}function f(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}if(AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;$(".preloader").fadeIn();var r=sAppPath+"WebServices/ActionButtons.ashx",i=new FormData;i.append("SearchTable",$(".MainPageTitle").attr("data-id"));i.append("ActionID",t);i.append("MyItems",n);$.ajax({type:"POST",contentType:!1,processData:!1,data:i,url:r+"/ExecuteAction",success:u,error:f})}}function UpdateProfileDetail(n,t,i,r,u){function o(i){var r=jQuery.parseJSON(i),u=!0;Object.keys(r).length>0?r.Error!=null?(u=!1,swal({title:"Update",text:r.Error.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1}),AvoidWebServiceRaceCondition=0):t=="Edit"?n.closest(".GridResults").find(".chkSelectGrdReadOnly").prop("checked",!n.is(":checked")):t=="Read Only"&&n.closest(".GridResults").find(".chkSelectGrdEdit").prop("checked",!n.is(":checked")):console.log("Couldn't Update Permission");u&&(AvoidWebServiceRaceCondition=0)}function s(n){console.log(n.error);AvoidWebServiceRaceCondition=0}if(AvoidWebServiceRaceCondition=0,AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;var e=sAppPath+"WebServices/UpdateProfileDetail.ashx",f=new FormData;f.append("QueryUrlStr",i);f.append("TabName",r);f.append("ActionName",u);t=="Edit"?(f.append("Edit",n.is(":checked")),f.append("ReadOnly",!n.is(":checked"))):t=="Read Only"&&(f.append("Edit",!n.is(":checked")),f.append("ReadOnly",n.is(":checked")));$.ajax({type:"POST",contentType:!1,processData:!1,data:f,url:e+"/Update",success:o,error:s})}}function UpdateUserActive(n){function r(t){var i=jQuery.parseJSON(t),r=!0;Object.keys(i).length>0?i.Error!=null?(r=!1,swal({title:"Update",text:i.Error.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1}),AvoidWebServiceRaceCondition=0):(n.closest(".GridResults").find(".chkSelectGrdActive").prop("checked",n.is(":checked")),$(".RecordHeader").find(".InputActive").val(n.is(":checked")?1:0)):console.log("Couldn't Update User Active");r&&(AvoidWebServiceRaceCondition=0)}function u(n){console.log(n.error);AvoidWebServiceRaceCondition=0}if(AvoidWebServiceRaceCondition=0,AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;var i=sAppPath+"WebServices/UpdateUserActive.ashx",t=new FormData;t.append("MyID",n.data("id"));t.append("Active",n.is(":checked"));$.ajax({type:"POST",contentType:!1,processData:!1,data:t,url:i+"/Update",success:r,error:u})}}function GetUserConfiguration(){function i(n){var t=jQuery.parseJSON(n);if(Object.keys(t).length>0){if(t.ColumnsNames!=""){var i=t.ColumnsNames.split(","),r=t.ColumnsPriorities.split(","),u=t.ColumnsHidden.split(","),e=t.ColumnsWidthes.split(","),f=t.GridTypes.split(","),o=t.MenuOpen=="0"?500:0;setTimeout(function(){var t,n,s,v,y,p;for(MyWidth=0,MyWidthDetails=0,n=0;n<i.length;n++)if(s=u[n]=="0"?e[n]:0,f[n]=="Header"?(t=$(".HeaderGridView"),MyWidth+=parseFloat(s)):(t=$(".DetailsGridView"),MyWidthDetails+=parseFloat(s)),r[n]!="0"){var h=i[n],c=r[n],o=u[n]=="0"?"false":"true",a=t.find(".GridAdjust").children(".GridCell[data-id='"+h+"']"),l=a.index();a.attr("data-priority",c);a.outerWidth(s);a.attr("data-hidden",o);f[n]=="Header"?($(".MyFields[value='"+h+"']").attr("data-priority",c),$(".MyFields[value='"+h+"']").attr("data-hidden",o)):($(".MyDetailsFields[value='"+h+"']").attr("data-priority",c),$(".MyDetailsFields[value='"+h+"']").attr("data-hidden",o));t.find(".SearchStyle").children(".GridCell").eq(l).attr("data-priority",c);t.find(".SearchStyle").children(".GridCell").eq(l).attr("data-hidden",o);t.find(".NoResults").children(".GridCell").eq(l).attr("data-hidden",o);t.find(".GridResults").each(function(){$(this).children(".GridCell").eq(l).attr("data-hidden",o);$(this).children(".GridCell").eq(l).attr("data-priority",c)})}else t.find(".GridAdjust").children(".GridCell").eq(n).outerWidth(s);ShowHideColumns($(".HeaderGridView").find(".GridRow"));ChangeColumnsOrder($(".HeaderGridView").find(".GridRow"));ShowHideColumns($(".DetailsGridView").find(".GridRow"));ChangeColumnsOrder($(".DetailsGridView").find(".GridRow"));$(".GridCell").find(".chosen-container").remove();$(".GridCell").find(".chosen-select").chosen({disable_search_threshold:10,width:"100%",search_contains:!1});v=!0;$(".GridCell").find(".chosen-select").on("chosen:showing_dropdown",function(){v=!1;$(".content_3").mCustomScrollbar("disable");$(this).parents("div").css("overflow","visible");$(this).siblings(".chosen-container").find(".search-field").show();setTimeout(function(){InitColResizable();v=!0},300)});$(".GridCell").find(".chosen-select").on("chosen:hiding_dropdown",function(){if(v){if($(".content_3").mCustomScrollbar("update"),$(this).parents("div").css("overflow",""),setTimeout(function(){InitColResizable()},300),$(this).val()=="")return;$(this).siblings(".chosen-container").find(".search-field").hide()}});$(".GridCell").find(".chosen-select").on("change",function(){$(this).val()==""&&$(this).siblings(".chosen-container").find(".search-field").show()});SetDropDownSingleSelection();$("body").on("keydown",".GridCell .chosen-search-input",function(n){n.which===13&&$(this).closest(".chosen-container").find(".chosen-single-with-drop").length===0&&setTimeout(function(){$(".GridSearch").trigger("click")},300)});$(".HeaderGridView").find(".GridRow").not(".NoResults").each(function(){var n=$(this).children(".GridCell[data-priority]");n.removeClass("borderRight0");n.eq(n.length-1).addClass("borderRight0")});$(".DetailsGridView").find(".GridRow").not(".NoResults").each(function(){var n=$(this).children(".GridCell[data-priority]");n.removeClass("borderRight0");n.eq(n.length-1).addClass("borderRight0")});y=$(".HeaderGridView").find(".GridContainer").data("resizemode")=="overflow";p=$(".DetailsGridView").find(".GridContainer").data("resizemode")=="overflow";setTimeout(function(){y&&$(".HeaderGridView").find(".mCSB_container").width(MyWidth);p&&$(".DetailsGridView").find(".mCSB_container").width(MyWidthDetails)},100)},o)}}else console.log("Couldn't Get User Configuration");AvoidWebServiceRaceCondition=0;setTimeout(function(){InitColResizable()},1e3)}function r(n){console.log(n.error);AvoidWebServiceRaceCondition=0}if(AvoidWebServiceRaceCondition=0,AvoidWebServiceRaceCondition==0){$(".DetailsGridView").find(".mCSB_container").css({left:0});$(".DetailsGridView").find(".mCSB_dragger").css({left:0});AvoidWebServiceRaceCondition=1;var t=sAppPath+"WebServices/UserConfiguration.ashx",n=new FormData;n.append("ActionType","get");n.append("SearchTable",$(".MainPageTitle").length>0?$(".MainPageTitle").attr("data-id"):"");$.ajax({type:"POST",contentType:!1,processData:!1,data:n,url:t+"/UserConfigurationAction",success:i,error:r})}}function SetUserConfigution(){function o(n){var t=jQuery.parseJSON(n);Object.keys(t).length>0?t.Error!=null&&(swal({title:"Update",text:t.Error,type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1}),AvoidWebServiceRaceCondition=0):console.log("Couldn't Set User Configuration");setTimeout(function(){AvoidWebServiceRaceCondition=0;$(".preloader").fadeOut()},300)}function s(n){console.log(n.error);setTimeout(function(){AvoidWebServiceRaceCondition=0;$(".preloader").fadeOut()},300)}var e,n;if(AvoidWebServiceRaceCondition=0,AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;var t="",i="",f="",r="",u="";$(".GridAdjust").length>0&&$(".GridAdjust").children(".GridCell").each(function(n){var e=$(this);u+=e.closest(".HeaderGridView").length>0?"Header,":"Detail,";e.data("id")==null?(t+=n.toString()+",",i+="0,",r+="0,"):(t+=e.data("id")+",",i+=(e.data("priority")==null?"500":e.data("priority"))+",",r+=(e.attr("data-hidden")=="true"?"1":"0")+",");f+=e.outerWidth()+","});e=sAppPath+"WebServices/UserConfiguration.ashx";n=new FormData;n.append("ActionType","set");n.append("SearchTable",$(".MainPageTitle").length>0?$(".MainPageTitle").attr("data-id"):"");n.append("MenuOpen",$(".MenuPin").hasClass("Pinned")?1:0);n.append("ColumnsNames",t.slice(0,-1));n.append("ColumnsPriorities",i.slice(0,-1));n.append("ColumnsWidthes",f.slice(0,-1));n.append("ColumnsHidden",r.slice(0,-1));n.append("GridTypes",u.slice(0,-1));$.ajax({type:"POST",contentType:!1,processData:!1,data:n,url:e+"/UserConfigurationAction",success:o,error:s})}}function ExportItems(){function f(n){var t=jQuery.parseJSON(n);if(Object.keys(t).length>0)if(t.Error!="")swal({title:"Export",text:t.Error,type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1}),AvoidWebServiceRaceCondition=0;else{var r="text/csv",u="﻿"+t.CSVData,f=new Blob([u],{type:r}),i=document.createElement("a");i.href=URL.createObjectURL(f);i.download=t.FileName;i.dataset.downloadurl=[r,i.download,i.href].join(":");t.ExportRowsLimit>0?swal({title:"Export Rows Limit",text:"Only "+t.ExportRowsLimit+" records will be exported",type:"warning",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!0},function(n){n?i.click():AvoidWebServiceRaceCondition=0}):i.click()}else console.log("Couldn't Export Items");setTimeout(function(){AvoidWebServiceRaceCondition=0},300)}function e(n){console.log(n.error);setTimeout(function(){AvoidWebServiceRaceCondition=0},300)}var t,r,i,u,n;AvoidWebServiceRaceCondition=0;AvoidWebServiceRaceCondition==0&&(AvoidWebServiceRaceCondition=1,t="",$(".MyFields[data-columnname]").each(function(){t+=$(this).val()+","}),r=sAppPath+"WebServices/ExportItems.ashx",i="",$(".MyTab").length>0&&(i=$(".MyTab.Active").data("id")),u=$(".QueryUrlStr").val(),n=new FormData,n.append("SearchQuery",SearchQuery),n.append("SearchTable",$(".MainPageTitle").attr("data-id")),n.append("ColumnsNames",t.slice(0,-1)),n.append("SortBy",SortBy),n.append("QueryUrlStr",u),n.append("TabName",i),$.ajax({type:"POST",contentType:!1,processData:!1,data:n,url:r+"/Export",success:f,error:e}))}function ExportItemsDetails(){function u(n){var t=jQuery.parseJSON(n);if(Object.keys(t).length>0)if(t.Error!="")swal({title:"Export",text:t.Error,type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1}),AvoidWebServiceRaceCondition=0;else{var r="text/csv",u="﻿"+t.CSVData,f=new Blob([u],{type:r}),i=document.createElement("a");i.href=URL.createObjectURL(f);i.download=t.FileName;i.dataset.downloadurl=[r,i.download,i.href].join(":");t.ExportRowsLimit>0?swal({title:"Export Rows Limit",text:"Only "+t.ExportRowsLimit+" records will be exported",type:"warning",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!0},function(n){n?i.click():AvoidWebServiceRaceCondition=0}):i.click()}else console.log("Couldn't Export Items");setTimeout(function(){AvoidWebServiceRaceCondition=0},300)}function f(n){console.log(n.error);setTimeout(function(){AvoidWebServiceRaceCondition=0},300)}var i,r,n,t;AvoidWebServiceRaceCondition=0;AvoidWebServiceRaceCondition==0&&(AvoidWebServiceRaceCondition=1,i="",$(".MyDetailsFields[data-columnname]").each(function(){i+=$(this).val()+","}),r=sAppPath+"WebServices/ExportItemsDetails.ashx",n=new FormData,n.append("SearchQuery",SearchQueryDetails),n.append("SearchTable",$(".MainPageTitle").attr("data-id")),n.append("ColumnsNames",i.slice(0,-1)),n.append("SortBy",SortByDetails),n.append("Facility",$(".NewHeaderRecord").find(".InputFacility").val()),$(".MainPageTitle").attr("data-id")=="Warehouse_PO"?t=$(".NewHeaderRecord").find(".InputPOKey").val():$(".MainPageTitle").attr("data-id")=="Warehouse_ASN"?t=$(".NewHeaderRecord").find(".InputReceiptKey").val():$(".MainPageTitle").attr("data-id")=="Warehouse_SO"?t=$(".NewHeaderRecord").find(".InputOrderKey").val():$(".MainPageTitle").attr("data-id")=="Warehouse_OrderManagement"&&(t=$(".NewHeaderRecord").find(".InputOrderManagKey").val()),n.append("Key",t),$.ajax({type:"POST",contentType:!1,processData:!1,data:n,url:r+"/Export",success:u,error:f}))}function ImportItems(n){function r(n){var t=jQuery.parseJSON(n),i=!0;Object.keys(t).length>0?t.Error!=null&&(i=!1,setTimeout(function(){swal({title:"Import",text:t.Error.replace(/<br\s*\/?>/gim,"\n"),type:"error",confirmButtonColor:$(".AlertconfirmButtonColor").val(),showCancelButton:!1});$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})},500)):console.log("Couldn't Import Items");i&&(AvoidWebServiceRaceCondition=0,isFirstLoad=!0,LoadItems())}function u(n){console.log(n.error);$(".preloader").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}if(AvoidWebServiceRaceCondition=0,AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;$(".preloader").fadeIn();var i=sAppPath+"WebServices/ImportItems.ashx",t=new FormData;t.append("SearchTable",$(".MainPageTitle").attr("data-id"));t.append("ImportFile",$(".ImportFileUpload").get(0).files[0]);t.append("ImportFileSize",n);$.ajax({type:"POST",contentType:!1,processData:!1,data:t,url:i+"/Import",success:r,error:u})}}function SetScrolling(){$(".content_3").mCustomScrollbar({updateOnContentResize:!0,scrollButtons:{enable:!1},axis:"x",theme:"dark"});$(".content_4").mCustomScrollbar({updateOnContentResize:!0,scrollButtons:{enable:!1},axis:"y",theme:"dark",scrollInertia:100})}function OpenMenu(){$(".widthMenu:visible").length>0&&NtorKermelElraceCondition==0&&(NtorKermelElraceCondition=1,ClearConfigTimer(),MenuClosed=!1,$(".widthMenu,.MenuContainer,.widthContent").removeClass("Closed"),$(".AllMenuItems").hide(),$("table.u-marginAuto").fadeOut(),setTimeout(function(){$(".MainLogoContainer,.MenuItemName,.MenuSubItem,.MenuSubSubItem,.MenuItemStyleSel,.u-pl-xs-20,.u-pb-xs-30").removeClass("Closed");$(".OpenMenu").addClass("Closed");$(".AllMenuItems").fadeIn();setOnCufex_Resize();$("table.u-marginAuto").fadeIn();InitColResizable();SetConfigTimer();NtorKermelElraceCondition=0},300))}function CloseMenu(n){$(".widthMenu:visible").length>0&&NtorKermelElraceCondition==0&&(NtorKermelElraceCondition=1,ClearConfigTimer(),MenuClosed=!0,$(".MainLogoContainer,.MenuItemName,.MenuSubItem,.MenuSubSubItem,.MenuItemStyleSel,.u-pl-xs-20,.u-pb-xs-30,.widthMenu,.MenuContainer,.widthContent").addClass("Closed"),$(".OpenMenu").removeClass("Closed"),$(".MenuPin").removeClass("Pinned"),$("table.u-marginAuto").fadeOut(),setTimeout(function(){setOnCufex_Resize();$("table.u-marginAuto").fadeIn();setTimeout(function(){InitColResizable()},100);n&&(setTimeout(function(){setOnCufex_Resize()},100),SetConfigTimer());NtorKermelElraceCondition=0},300))}function InitColResizable(){var n,t;if($(".MainPageTitle").attr("data-id")!="PROFILEDETAIL"){n=$(".HeaderGridView:visible").length>0?$(".HeaderGridView"):$(".DetailsGridView");n.find(".GridContainer").removeClass("JCLRFlex").removeClass("JColResizer");n.find(".GridContainer").removeAttr("id");n.find(".JCLRgrips").remove();t=n.find(".GridContainer").data("resizemode");n.find(".GridContainer").colResizable({liveDrag:!0,resizeMode:t,onDrag:r,onResize:i,gripInnerHtml:"<div class='grip'><\/div>",draggingClass:"dragging"});function i(){$(".GridContainer").data("resizemode")=="overflow"&&($(".HeaderGridView:visible").length>0?($(".HeaderGridView").find(".PagingContainer").width($(".HeaderGridView").find(".GridContainer").innerWidth()),$(".HeaderGridView").mCustomScrollbar("update")):($(".DetailsGridView").find(".PagingContainer").width($(".DetailsGridView").find(".GridContainer").innerWidth()),$(".DetailsGridView").mCustomScrollbar("update")));SetConfigTimer()}function r(){ClearConfigTimer()}}}function SetConfigTimer(){ConfigTimer=setTimeout(function(){SetUserConfigution()},3e3)}function ClearConfigTimer(){clearTimeout(ConfigTimer)}function SetMenuFunctionality(){$(".openProfMenu").unbind("click").bind("click",function(n){n.preventDefault();n.stopPropagation();$(".ProfileData").stop(!0,!0).slideToggle(200);$(".iconOpen").stop(!0,!0).toggleClass("rotate180")});$(".widthMenu").mouseenter(function(n){n.stopPropagation();MenuClosed&&OpenMenu()});$(".widthMenu").mouseleave(function(n){n.stopPropagation();$(".MenuPin").hasClass("Pinned")||MenuClosed||CloseMenu(!1)});$(".MenuItemStyle,.MenuSubItem,.MenuSubSubItem ").attr({tabindex:"-1"});$(".MenuItemStyle").unbind("click").click(function(n){var t;NtorKermelElraceCondition==0&&($(".MenuItemName").is(":visible")?(t=$(this),t.find(".MenuArrow").hasClass("Opened")?t.find(".MenuArrow").removeClass("Opened"):t.find(".MenuArrow").addClass("Opened"),$(".MenuItemStyleSel").not(t).find(".MenuArrow").removeClass("Opened"),$(".MenuItemStyleSel").not(t).removeClass("MenuItemStyleSel").animate({height:"55px"},200),t.hasClass("MenuItemStyleSel")?t.removeClass("MenuItemStyleSel").animate({height:"55px"},200):t.addClass("MenuItemStyleSel").css({height:"55px"}).animate({height:parseInt(t.children("div").height())+20+"px"},200),setTimeout(function(){$(".MenuItemStyleSel").each(function(){$(this).animate({height:parseInt($(this).children("div").height())+20+"px"})});$(".GoToChildOnClick").unbind(myClickEvent).bind(myClickEvent,function(){})},200)):(OpenMenu(),t=$(this),t.find(".MenuArrow").addClass("Opened"),$(".MenuItemStyleSel").not(t).find(".MenuArrow").removeClass("Opened"),setTimeout(function(){$(".MenuItemStyleSel").not(t).removeClass("MenuItemStyleSel").height("55px");t.addClass("MenuItemStyleSel").css({height:"55px"}).animate({height:parseInt(t.children("div").height())+20+"px"},200)},300)));n.stopPropagation()});$(".MenuSubItem").unbind("click").click(function(n){if(NtorKermelElraceCondition==0){var t=$(this);$(".MenuSubItemSel").not(t).removeClass("MenuSubItemSel").animate({height:"22px"},200);t.hasClass("MenuSubItemSel")?t.removeClass("MenuSubItemSel").animate({height:"22px"},200):t.addClass("MenuSubItemSel").css({height:"22px"}).animate({height:parseInt(t.children("div").height())+"px"},200);setTimeout(function(){$(".MenuItemStyleSel").each(function(){$(this).animate({height:parseInt($(this).children("div").height())+20+"px"})})},200)}n.stopPropagation()});$(".DivMenuInLogoResp").unbind("click").click(function(){parseInt($(".MenuItemsContainer").css("margin-top"))==0?$(".MenuItemsContainer").stop(!0,!0).animate({"margin-top":"-300%"},600,"easeInCubic"):$(".MenuItemsContainer").stop(!0,!0).animate({"margin-top":"0px"},600,"easeOutCubic")});$(".PinMenu").unbind("click").click(function(){$(".MenuPin").hasClass("Pinned")?CloseMenu(!0):($(".MenuPin").addClass("Pinned"),SetConfigTimer())});$(".OpenMenu").click(function(){MenuClosed?OpenMenu():CloseMenu(!0)})}function MoveTabLine(n){$(".MyTabLine").animate({width:$(".MyTab").eq(n).outerWidth()+"px",left:$(".MyTab").eq(n).offset().left-$(".widthMenu").width()+"px"},200)}function GetTime(){var n=new Date;return n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()}function GetCarrierDetails(n){function r(n){var t=jQuery.parseJSON(n);Object.keys(t).length>0?t.CarrierDetailsRecords!=""&&$(".ArticlesDivRecords").html(t.CarrierDetailsRecords):console.log("Couldn't Get Carrier Details");$(".TrackingHistoryDiv").unbind("click").bind("click",function(){var n=$(this);n.hasClass("Active")?n.siblings(".EventsDiv").slideUp(function(){n.removeClass("Active")}):($(".TrackingHistoryDiv").not(n).siblings(".EventsDiv").slideUp(function(){setTimeout(function(){$(".TrackingHistoryDiv").not(n).removeClass("Active")},400)}),n.addClass("Active"),n.siblings(".EventsDiv").slideDown())});$(".preloader2").fadeOut(300,function(){setOnCufex_Resize();AvoidWebServiceRaceCondition=0})}function u(n){console.log(n.error);$(".preloader2").fadeOut(300,function(){AvoidWebServiceRaceCondition=0})}if(AvoidWebServiceRaceCondition==0){AvoidWebServiceRaceCondition=1;$(".preloader2").fadeIn();var i=sAppPath+"WebServices/CarrierEvents.ashx",t=new FormData;t.append("CarrierDetailType",n);t.append("ExternalOrderKey",$(".CarrierDiv.Active").data("externalorderkey"));t.append("StorerKey",$(".CarrierDiv.Active").data("storerkey"));t.append("ConsignmentID",$(".CarrierDiv.Active").data("consignmentid"));t.append("Category",$(".CarrierDiv.Active").data("category"));$.ajax({type:"POST",contentType:!1,processData:!1,data:t,url:i+"/GetCarrierEventsDetails",success:r,error:u})}}function setOnCufex_Resize(){$(".CufexLogoTD,.addSpacebeforeHeader").css({height:"72px"});$(".BackMenuDiv").css({width:"0px"});$(".MainPageContainer").height($(window).height());$(".BeforeMainPage").css({height:(parseInt($(window).height())-parseInt($(".MainPageDivInside").height()))/2+"px"});SetMasterResize();$(".Cufex_PopUpAttachment").css({top:$(".ImgTxt").height()});$(".Containerbase").length>0&&$(".Containerbase").each(function(){var n=$(this).height(),t=$(this).parent(".AbsoPopup").height();n<t&&$(this).css({top:(t-n)/2+"px"})});$(window).width()<=860&&!MenuClosed&&CloseMenu(!1);$(window).width()<=550?$(".btnSave:visible").length>0?($(".btnDelete").parent("td").css("padding-right","0px"),$(".btnDelete").parent("td").css("margin-bottom","10px"),$(".btnActions").parent("td").css("padding-right","10px"),$(".ActionHiddenButtons").css("right","unset")):($(".btnDelete").parent("td").css("padding-right","10px"),$(".btnDelete").parent("td").css("margin-bottom","0px"),$(".NewRecord").length>0?$(".btnActions").parent("td").css("padding-right","0px"):$(".btnActions").parent("td").css("padding-right","10px"),$(".ActionHiddenButtons").css("right","0")):($(".btnDelete").parent("td").css("padding-right","0px"),$(".ActionHiddenButtons").css("right","0"));$(".MyTab").length>0&&MoveTabLine($(".MyTab.Active").index());$(".content_3").mCustomScrollbar("update");$(".content_3").width(0);$(".content_3").width($(".MainHeader").width());$(".content_3").find(".mCSB_container").width($(".MainHeader").width());$(".content_4").mCustomScrollbar("update")}var AvoidWebServiceRaceCondition=0,NtorKermelElraceCondition=0,MenuClosed=!1,jcrop_api,CurrentPage=0,CurrentPageDetails=0,MaxPages=1,MaxPagesDetails=1,SearchQuery="",SearchQueryDetails="",SortBy="id desc",SortByDetails=SortBy,isFirstLoad=!0,NumberOfRecordsInPage=0,NumberOfRecordsInPageDetails=0,myDropzone,MyWidth,MyWidthDetails,prm,IsAutoPostBack,IsAutoPostBackDetails,ConfigTimer;Dropzone.autoDiscover=!1;MyWidth=0;MyWidthDetails=0;$(document).ready(function(){SetDefaults()});prm=Sys.WebForms.PageRequestManager.getInstance();prm.add_endRequest(function(){SetDefaults()});$(window).load(function(){setOnCufex_Resize()});IsAutoPostBack=!1;IsAutoPostBackDetails=!1;