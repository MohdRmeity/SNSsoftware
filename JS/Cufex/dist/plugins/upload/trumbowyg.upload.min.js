(function(n){"use strict";function t(n,i){var r=i.shift(),u=i;if(n!==null){if(u.length===0)return n[r];if(typeof n=="object")return t(n[r],u)}return n}function i(){if(!n.trumbowyg&&!n.trumbowyg.addedXhrProgressEvent){var t=n.ajaxSettings.xhr;n.ajaxSetup({xhr:function(){var n=t(),i=this;return n&&typeof n.upload=="object"&&i.progressUpload!==undefined&&n.upload.addEventListener("progress",function(n){i.progressUpload(n)},!1),n}});n.trumbowyg.addedXhrProgressEvent=!0}}i();n.extend(!0,n.trumbowyg,{langs:{en:{upload:"Upload",file:"File",uploadError:"Error"},sk:{upload:"Nahrať",file:"Súbor",uploadError:"Chyba"},fr:{upload:"Envoi",file:"Fichier",uploadError:"Erreur"},cs:{upload:"Nahrát obrázek",file:"Soubor",uploadError:"Chyba"}},upload:{serverPath:"https://api.imgur.com/3/image",fileFieldName:"image",headers:{Authorization:"Client-ID 9e57cb1c4791cea"},urlPropertyName:"data.link",data:[],statusPropertyName:"success",success:undefined,error:undefined},opts:{btnsDef:{upload:{func:function(i,r){var e,u=r.o.prefix,f=r.openModalInsert(r.lang.upload,{file:{type:"file",required:!0},alt:{label:"description"}},function(i){var o=new FormData;o.append(n.trumbowyg.upload.fileFieldName,e);n.trumbowyg.upload.data.map(function(n){o.append(n.name,n.value)});n("."+u+"progress",f).length===0&&n("."+u+"modal-title",f).after(n("<div/>",{"class":u+"progress"}).append(n("<div/>",{"class":u+"progress-bar"})));n.ajax({url:n.trumbowyg.upload.serverPath,headers:n.trumbowyg.upload.headers,type:"POST",data:o,cache:!1,dataType:"json",processData:!1,contentType:!1,progressUpload:function(t){n("."+u+"progress-bar").stop().animate({width:Math.round(t.loaded*100/t.total)+"%"},200)},success:n.trumbowyg.upload.success||function(u){if(!t(u,n.trumbowyg.upload.statusPropertyName.split(".")))r.addErrorOnModalField(n("input[type=file]",f),r.lang[u.message]);else{var e=t(u,n.trumbowyg.upload.urlPropertyName.split("."));r.execCmd("insertImage",e);n('img[src="'+e+'"]:not([alt])',r.$box).attr("alt",i.alt);setTimeout(function(){r.closeModal()},250)}},error:n.trumbowyg.upload.error||function(){r.addErrorOnModalField(n("input[type=file]",f),r.lang.uploadError)}})});n("input[type=file]").on("change",function(n){try{e=n.target.files[0]}catch(t){e=n.target.value}})},ico:"insertImage"}}}})})(jQuery);
//# sourceMappingURL=trumbowyg.upload.min.js.map
